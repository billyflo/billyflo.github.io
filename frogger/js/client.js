function t(){document.addEventListener("contextmenu",i,!1),document.addEventListener("mousedown",n,!1),P=new R}function e(){null!=P&&(document.removeEventListener("contextmenu",i,!1),document.removeEventListener("mousedown",n,!1),window.removeEventListener("load",t,!1),window.removeEventListener("unload",e,!1),P.destroy(),P=null)}function i(t){t.preventDefault()}function n(t){if(2==t.button)return console.log("disableclick"),t.preventDefault(),!1}var o=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},s=function(t){function e(){t.call(this),Logs.log("NewUserView")}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"newUserView","img/graphics/screens.json"),this.addBindHandlers(),this.setBackground()},e.prototype.addBindHandlers=function(){var t=this;this.m_onRegisterHandlerBind=function(e){return t.onRegisterHandler(e)},this.m_onGuestHandlerBind=function(e){return t.onGuestHandler(e)},this.m_onCloseHandlerBind=function(e){return t.onCloseHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onRegisterHandlerBind=null,this.m_onGuestHandlerBind=null,this.m_onCloseHandlerBind=null},e.prototype.setBackground=function(){this.setCenterButton("registerBtn",this.m_onRegisterHandlerBind,!0,200),this.setCenterButton("guestBtn",this.m_onGuestHandlerBind,!0,200),this.setCornerButton("closeBtn",this.m_onCloseHandlerBind,Support.RIGHT_UP),this.m_nameTxt=this.setInput("nameInp"),this.m_emailTxt=this.setInput("email_Inp")},e.prototype.onRegisterHandler=function(t){return""==this.m_nameTxt.text?(this.m_nameTxt.addFocus(),void this.m_emailTxt.removeFocus()):""==this.m_emailTxt.text?(this.m_nameTxt.removeFocus(),void this.m_emailTxt.addFocus()):(OfflineData.addNewUser(this.m_nameTxt.text,this.m_emailTxt.text),this.s.currentView=new E,void this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW)))},e.prototype.onGuestHandler=function(t){OfflineData.addNewGuestUser(),this.s.currentView=new E,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onCloseHandler=function(t){this.s.currentView=new E,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),this.m_nameTxt=null,this.m_emailTxt=null},e}(ParentView),r=function(t){function e(){t.call(this),Logs.log("LoginView")}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"loginView","img/graphics/screens.json"),this.addBindHandlers(),this.setCenterButton("loginBtn",this.m_onLoginHandlerBind),this.setCenterButton("guestBtn",this.m_onGuestHandlerBind)},e.prototype.addBindHandlers=function(){var t=this;this.m_onLoginHandlerBind=function(e){return t.onLoginHandler(e)},this.m_onGuestHandlerBind=function(e){return t.onGuestHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onLoginHandlerBind=null,this.m_onGuestHandlerBind=null},e.prototype.onLoginHandler=function(t){this.s.currentView=new s,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onGuestHandler=function(t){OfflineData.addNewGuestUser(),this.s.currentView=new E,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),Logs.log("destroy LoginView ------------------------------")},e}(ParentView),a=function(t){function e(e,i,n){t.call(this),this.m_instance=e,this.m_url=i,this.m_dir=n>0?1:-1,this.init()}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.m_troncoIns=new Instance(this.m_instance,this.m_url),this.m_troncoIns.anchor=.5,this.p_content=this.m_troncoIns.content},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.m_troncoIns.destroy(),this.m_troncoIns=null},e}(Entity),l=function(t){function e(e,i,n,o){t.call(this),this.m_instance=e,this.m_url=i,this.m_dir=n>0?1:-1,this.m_speedHelp=o+.2*MathUtils.m1to1Half,this.m_speed=this.m_speedHelp*this.m_dir,this.m_widthGame=15*Constants.TILE_WIDTH*Capabilities.i.textureRatio,this.init()}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.m_troncosArray=[];var e,i,n=MathUtils.floor(2*MathUtils.random())+2,o=(20*MathUtils.random()+20)*Capabilities.i.textureRatio,s=MathUtils.m1to1Half*this.m_widthGame*.5;for(e=0;e<n;e++)i=new a(this.m_instance,this.m_url,this.m_dir),i.x=s+(o+1.5*i.content.width)*e,i.paddingX=70*Capabilities.i.textureRatio,this.addEntity(i),this.m_troncosArray.push(i);this.m_total=this.m_troncosArray.length,this.m_limitLeft=-i.content.width,this.m_limitRight=i.content.width+o+this.m_widthGame,this.m_total>2&&(this.m_limitRight=3*i.content.width+o+this.m_widthGame)},e.prototype.update=function(){t.prototype.update.call(this);for(var e=this.m_total;e--;)this.m_troncosArray[e].xy.x>this.m_limitRight&&(this.m_troncosArray[e].xy.x=this.m_limitLeft),this.m_troncosArray[e].xy.x<this.m_limitLeft&&(this.m_troncosArray[e].xy.x=this.m_limitRight),this.m_troncosArray[e].xy.x+=this.m_speed},Object.defineProperty(e.prototype,"speedHelp",{get:function(){return this.m_speedHelp},set:function(t){this.m_speedHelp=t,this.m_speed=this.m_speedHelp*this.m_dir},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.m_speed},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=this.m_total;e--;)this.m_troncosArray[e].destroy(),this.m_troncosArray[e]=null;this.m_troncosArray=null},e}(Entity),h=function(t){function e(e){t.call(this),this.init(e)}return o(e,t),e.prototype.init=function(e){t.prototype.init.call(this),this.m_homes=[],this.m_frogerHouse=[];var i,n,o,s=5;for(o=0;o<s;o++)i=e.getChildByName("home"+o+"Sp"),n=new L(i),n.x=i.position.x,n.y=i.position.y,n.paddingX=30*Capabilities.i.textureRatio,this.m_homes.push(n),this.addEntity(n);this.m_widthChild=this.m_homes[0].content.width,this.m_heightChild=this.m_homes[0].content.height},e.prototype.testCollision=function(e){var i=t.prototype.testCollision.call(this,e);if(i)for(var n=this.m_homes.length;n--;)if(null==this.m_frogerHouse[n]&&this.m_homes[n].testCollision(e)){var o=new Instance("frogerStandIns","img/graphics/game.json");return o.anchor=.5,o.content.rotation=MathUtils.PI,o.position.x=this.m_homes[n].x+.5*this.m_widthChild,o.position.y=this.m_homes[n].y+.5*this.m_heightChild,this.addChild(o.content),this.m_frogerHouse[n]=o,!0}return!1},e.prototype.resetFrogerHouse=function(){for(var t=this.m_homes.length;t--;)this.m_frogerHouse[t]&&(this.removeChild(this.m_frogerHouse[t].content),this.m_frogerHouse[t]=null)},e.prototype.destroy=function(){t.prototype.destroy.call(this);var e,i=this.m_homes.length;for(e=0;e<i;e++)this.m_homes[e].destroy(),this.m_homes[e]=null;this.resetFrogerHouse(),this.m_homes=null,this.m_frogerHouse=null},e}(Entity),m=function(t){function e(e,i,n){t.call(this),this.m_instance=e,this.m_url=i,this.m_dir=n>0?1:-1,this.init()}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.m_carIns=new Instance(this.m_instance,this.m_url),this.m_carIns.anchor=.5,this.p_content=this.m_carIns.content,this.m_dir>0&&(this.m_carIns.content.rotation=MathUtils.PI)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.m_carIns.destroy(),this.m_carIns=null},e}(Entity),d=function(t){function e(e,i,n,o){t.call(this),this.m_instance=e,this.m_url=i,this.m_dir=n>0?1:-1,this.m_speedHelp=o+.2*MathUtils.m1to1Half,this.m_speed=this.m_speedHelp*this.m_dir,this.m_widthGame=15*Constants.TILE_WIDTH*Capabilities.i.textureRatio,this.init()}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.m_carsArray=[];var e,i,n=MathUtils.floor(2*MathUtils.random())+2,o=(30*MathUtils.random()+30)*Capabilities.i.textureRatio,s=MathUtils.m1to1Half*this.m_widthGame*.3;for(e=0;e<n;e++)i=new m(this.m_instance,this.m_url,this.m_dir),i.x=s+(o+3*i.content.width)*e,this.addEntity(i),this.m_carsArray.push(i);this.m_total=this.m_carsArray.length,this.m_limitLeft=-i.content.width,this.m_limitRight=i.content.width+o+this.m_widthGame,this.m_total>2&&(this.m_limitRight=3*i.content.width+o+this.m_widthGame)},e.prototype.update=function(){t.prototype.update.call(this);for(var e=this.m_total;e--;)this.m_carsArray[e].xy.x>this.m_limitRight&&(this.m_carsArray[e].xy.x=this.m_limitLeft),this.m_carsArray[e].xy.x<this.m_limitLeft&&(this.m_carsArray[e].xy.x=this.m_limitRight),this.m_carsArray[e].xy.x+=this.m_speed},Object.defineProperty(e.prototype,"speedHelp",{get:function(){return this.m_speedHelp},set:function(t){this.m_speedHelp=t,this.m_speed=this.m_speedHelp*this.m_dir},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=this.m_total;e--;)this.m_carsArray[e].destroy(),this.m_carsArray[e]=null;this.m_carsArray=null},e}(Entity),p=function(t){function e(e){t.call(this,e)}return o(e,t),e.prototype.init=function(e){t.prototype.init.call(this),this.addBindHandlers(),this.m_scoreHelp={},this.m_score=0,this.m_tileWidth=Constants.TILE_WIDTH*Capabilities.i.textureRatio,this.m_speed=this.m_tileWidth,this.m_move=!1,this.m_frogerStand=new Instance("frogerStandIns","img/graphics/game.json"),this.m_frogerStand.anchor=.5,this.p_content=this.m_frogerStand.content,this.m_KEvent=new KeyEvent(null,this.m_onKeyUpHandlerBind)},e.prototype.addBindHandlers=function(){var t=this;this.m_onKeyUpHandlerBind=function(e){return t.onKeyUpHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onKeyUpHandlerBind=null},e.prototype.onKeyUpHandler=function(t){if(0!=this.m_move){var e=t.keyCode;37==e?this.toLeft():39==e?this.toRight():38==e?this.toUp():40==e&&this.toDown()}},e.prototype.toLeft=function(){this.rotation=.5*-Math.PI,this.m_xy.x<=this.m_limitLeft+.6*this.m_tileWidth?this.m_xy.x=this.m_limitLeft+.5*this.m_tileWidth:this.m_xy.x-=this.m_speed},e.prototype.toRight=function(){this.rotation=.5*Math.PI,this.m_xy.x>=this.m_limitRight-.6*this.m_tileWidth?this.m_xy.x=this.m_limitRight-.5*this.m_tileWidth:this.m_xy.x+=this.m_speed},e.prototype.toUp=function(){this.rotation=0,this.m_xy.y>this.m_limitUp+3*this.height&&(null==this.m_scoreHelp["score"+MathUtils.floor(this.m_xy.y/this.m_tileWidth)]&&(this.m_scoreHelp["score"+MathUtils.floor(this.m_xy.y/this.m_tileWidth)]=0,this.m_score+=10),this.m_xy.y-=this.m_speed)},e.prototype.toDown=function(){this.rotation=Math.PI,this.m_xy.y<this.m_limitDown-3*this.height&&(this.m_xy.y+=this.m_speed)},Object.defineProperty(e.prototype,"move",{set:function(t){this.m_move=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"limitLeft",{set:function(t){this.m_limitLeft=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"limitRight",{set:function(t){this.m_limitRight=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"limitUp",{set:function(t){this.m_limitUp=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"limitDown",{set:function(t){this.m_limitDown=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"score",{get:function(){return this.m_score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTile",{get:function(){return MathUtils.floor(this.m_xy.y/this.m_tileWidth)},enumerable:!0,configurable:!0}),e.prototype.reset=function(){var t=16,e=0;for(e=0;e<t;e++)this.m_scoreHelp["score"+e]=null;this.rotation=0},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),this.m_KEvent&&this.m_KEvent.destroy(),this.m_KEvent=null},e}(PlayerC),c=function(t){function e(){t.call(this)}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"preGamePopup","img/graphics/game.json"),this.addBindHandlers(),this.setBackground()},e.prototype.addBindHandlers=function(){},e.prototype.removeBindHandlers=function(){},e.prototype.setBackground=function(){this.m_countDownTxt=new BitmapText("3",{fontName:"Desyrel",fontSize:150,fill:"black",align:"left"}),this.m_countDownTxt.position.x=.5*(Constants.ASSETS_ZONE_WIDTH-this.m_countDownTxt.width)*Capabilities.i.textureRatio,this.m_countDownTxt.position.y=.5*(Constants.ASSETS_ZONE_HEIGHT-this.m_countDownTxt.height)*Capabilities.i.textureRatio,this.addChild(this.m_countDownTxt.content)},Object.defineProperty(e.prototype,"countDown",{set:function(t){this.m_countDownTxt.text=t},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),this.m_countDownTxt.destroy(),this.m_countDownTxt=null},e}(ParentPopup),u=function(t){function e(){t.call(this),Logs.log("WinnerPopup")}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"winnerPopup","img/graphics/game.json"),this.addBindHandlers(),this.setBackground()},e.prototype.addBindHandlers=function(){var t=this;this.m_onCloseHandlerBind=function(e){return t.onCloseHandler(e)},this.m_onPlayAgainHandlerBind=function(e){return t.onPlayAgainHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onCloseHandlerBind=null},e.prototype.setBackground=function(){this.m_closeBtn=this.setCornerButton("closeBtn",this.m_onCloseHandlerBind,Support.RIGHT_UP),this.m_playAgainBtn=this.setCenterButton("playAgainBtn",this.m_onPlayAgainHandlerBind),this.m_titleTxt=new BitmapText("W I N N E R",{fontName:"Desyrel",fontSize:100,fill:"black",align:"left"}),this.m_titleTxt.position.x=(700-.5*this.m_titleTxt.width)*Capabilities.i.textureRatio,this.m_titleTxt.position.y=480*Capabilities.i.textureRatio,this.addChild(this.m_titleTxt.content)},e.prototype.onCloseHandler=function(t){this.m_closeBtn.enabled=!1,this.onLeaveGameOverServer()},e.prototype.onPlayAgainHandler=function(t){this.m_playAgainBtn.enabled=!1,this.s.currentView=new g(null),this.s.dispatchEvent(new NewEvent(SingletonClass.CLOSE_POPUP)),this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onLeaveGameOverServer=function(){this.s.currentView=new B,this.s.dispatchEvent(new NewEvent(SingletonClass.CLOSE_POPUP)),this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),this.m_titleTxt.destroy(),this.m_closeBtn=null,this.m_playAgainBtn=null,this.m_titleTxt=null},e}(ParentPopup),_=function(t){function e(e){void 0===e&&(e=!1),t.call(this),this.m_draw=e,Logs.log("LoserPopup")}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"loserPopup","img/graphics/game.json"),this.addBindHandlers(),this.setBackground()},e.prototype.addBindHandlers=function(){var t=this;this.m_onCloseHandlerBind=function(e){return t.onCloseHandler(e)},this.m_onPlayAgainHandlerBind=function(e){return t.onPlayAgainHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onCloseHandlerBind=null,this.m_onPlayAgainHandlerBind=null},e.prototype.setBackground=function(){this.m_closeBtn=this.setCornerButton("closeBtn",this.m_onCloseHandlerBind,Support.RIGHT_UP),this.m_playAgainBtn=this.setCenterButton("playAgainBtn",this.m_onPlayAgainHandlerBind),this.m_titleTxt=new BitmapText("",{fontName:"Desyrel",fontSize:100,fill:"black",align:"left"}),this.m_draw?this.m_titleTxt.text="D R A W":this.m_titleTxt.text="L O O S E R",this.m_titleTxt.position.x=(700-.5*this.m_titleTxt.width)*Capabilities.i.textureRatio,this.m_titleTxt.position.y=480*Capabilities.i.textureRatio,this.addChild(this.m_titleTxt.content)},e.prototype.onCloseHandler=function(t){this.m_closeBtn.enabled=!1,this.onLeaveGameOverServer()},e.prototype.onPlayAgainHandler=function(t){this.m_playAgainBtn.enabled=!1,this.s.currentView=new g(null),this.s.dispatchEvent(new NewEvent(SingletonClass.CLOSE_POPUP)),this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onLeaveGameOverServer=function(){this.s.currentView=new B,this.s.dispatchEvent(new NewEvent(SingletonClass.CLOSE_POPUP)),this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),this.m_titleTxt.destroy()},e}(ParentPopup),y=function(t){function e(e,i){var n=this;t.call(this),this.onSwipeHandler=function(t){var e=MathUtils.abs(t.x),i=MathUtils.abs(t.y);e>i?t.x>0?n.m_playerBC.toRight():n.m_playerBC.toLeft():t.y>0?n.m_playerBC.toDown():n.m_playerBC.toUp()},this.onIntervalGame=function(){var t=Date.now(),e=(t-n.m_startTime,t-n.m_startCrono);n.m_countDownStart<=0,e>1e3&&(n.m_startCrono=t,n.m_countDownStart>0&&(n.m_countDownStart--,3==n.m_countDownStart?n.onPreGameShow():0==n.m_countDownStart&&(console.log("this.G INIT GAME"),n.onPreGameHide()),n.m_preGamePopup&&(n.m_preGamePopup.countDown=n.m_countDownStart.toString())),n.m_countDownLevelUp>0?(n.m_countDownLevelUp--,1==n.m_countDownLevelUp?n.onLevelUpShow():0==n.m_countDownLevelUp&&n.onLevelUpHide()):n.m_time>0?(n.m_time--,n.m_timeTxt.text=n.m_time.toString()):n.lostLive())},this.addInfoSingle()}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.m_countDownStart=4,this.m_countDownLevelUp=0,this.m_time=60,this.m_timeTxt.text=this.m_time.toString(),this.m_startGame=!1,this.m_startNextLevel=!0,this.m_isLandscape=!1,this.m_lifes=3,this.m_liveTxt.text=this.m_lifes.toString(),this.m_houses=0,this.m_homesTxt.text=this.m_houses.toString(),this.m_level=1,this.m_levelTxt.text=this.m_level.toString(),this.m_tileWidth=Constants.TILE_WIDTH*Capabilities.i.textureRatio,this.m_limitLeft=this.m_bgFroggerPc.position.x,this.m_limitRight=this.m_limitLeft+this.m_bgFroggerPc.width,this.m_limitUp=this.m_bgFroggerPc.position.y,this.m_limitDown=this.m_limitUp+this.m_bgFroggerPc.height,this.m_initFrogerX=this.m_limitLeft+.5*this.m_bgFroggerPc.width,this.m_initFrogerY=this.m_limitDown-1.5*this.m_tileWidth,this.m_speedCar=2*(MathUtils.random()+1)*Capabilities.i.textureRatio,this.m_waterBC=new T(this.m_waterGp),this.m_waterBC.x=this.m_waterGp.position.x,this.m_waterBC.y=this.m_waterGp.position.y,this.addEntity(this.m_waterBC),this.m_waterBC.enableCollisionRectangle(),this.m_landBC=new b(this.m_landGp),this.m_landBC.x=this.m_landGp.position.x,this.m_landBC.y=this.m_landGp.position.y,this.addEntity(this.m_landBC),this.m_landBC.enableCollisionRectangle();var e,i,n,o;for(this.m_randArray=[],this.m_carArray=[],e=0;e<5;e++)i=this.newRand(),n=MathUtils.m1to1Half,o=new d("car"+(i+1)+"Ins","img/graphics/game.json",n,this.m_speedCar),o.x=this.m_limitLeft,o.y=this.m_limitUp+this.m_tileWidth*(e+8.5),o.onlyChildsCollision=!0,this.addEntity(o),o.enableCollisionRectangle(!0,!0),this.m_carArray.push(o);var s;for(this.m_randArray=[],this.m_troncoArray=[],e=0;e<5;e++)i=this.newRand(),n=MathUtils.m1to1Half,s=new l("tronco"+(i+1)+"Ins","img/graphics/game.json",n,this.m_speedCar),s.x=this.m_limitLeft,s.y=this.m_limitUp+this.m_tileWidth*(e+2.5),s.onlyChildsCollision=!0,this.addEntity(s),s.enableCollisionRectangle(!0,!0),this.m_troncoArray.push(s);this.m_homeMgrBC=new h(this.m_homesMc),this.m_homeMgrBC.onlyChildsCollision=!0,this.m_homeMgrBC.x=this.m_homesMc.position.x,this.m_homeMgrBC.y=this.m_homesMc.position.y,this.addEntity(this.m_homeMgrBC),this.m_homeMgrBC.enableCollisionRectangle(!0),this.m_playerBC=new p,this.m_playerBC.x=this.m_initFrogerX,this.m_playerBC.y=this.m_initFrogerY,this.m_playerBC.limitLeft=this.m_limitLeft,this.m_playerBC.limitRight=this.m_limitRight,this.m_playerBC.limitUp=this.m_limitUp,this.m_playerBC.limitDown=this.m_limitDown,this.addChild(this.m_scoreFrogerMc.content),this.addEntity(this.m_playerBC),this.m_playerBC.enableCollisionRectangle(!0,!0),this.content.addChild(this.m_debug),Capabilities.i.isDesktop&&(this.m_graphicsMask=new PIXI.Graphics,this.m_graphicsMask.beginFill(16777215),this.m_graphicsMask.drawRect(0,0,this.m_bgFroggerPc.width,this.m_bgFroggerPc.height),this.m_graphicsMask.position.x=this.m_limitLeft,this.m_graphicsMask.position.y=this.m_limitUp,this.addChild(this.m_graphicsMask),this.p_content.mask=this.m_graphicsMask),this.m_scoreFrogerDifY=this.m_scoreFrogerMc.position.y,this.m_joySwipe&&(this.m_joySwipe.swipeCallback=this.onSwipeHandler)},e.prototype.addInfoSingle=function(){this.m_startTime=Date.now(),this.m_startCrono=this.m_startTime,this.m_timerId=setInterval(this.onIntervalGame,200)},e.prototype.newRand=function(){for(var t=MathUtils.floor(MathUtils.random()*e.RANDOM_MAX),i=this.m_randArray.indexOf(t);i>-1;)t=MathUtils.floor(MathUtils.random()*e.RANDOM_MAX),i=this.m_randArray.indexOf(t);return this.m_randArray.push(t),t},e.prototype.changeOrientation=function(e){if(t.prototype.changeOrientation.call(this,e),null!=this.m_joySwipe){var i,n,o=Capabilities.i,s=o.widthGame/15,r=s/Constants.TILE_WIDTH/o.textureRatio,a=0;if(e){i=o.width,n=o.width+100;var l=MathUtils.floor(Capabilities.i.heightGame/s),h=this.m_playerBC.currentTile-l+2;h>-1?this.m_scoreFrogerMc.position.y=Capabilities.i.initX+s*h:this.m_scoreFrogerMc.position.y=Capabilities.i.initX}else i=o.width/r,n=o.height/r,a=.5*(n-this.m_bgFroggerPc.content.height),this.m_scoreFrogerMc.position.y=this.m_scoreFrogerDifY;this.m_joySwipe.background.drawRect(0,0,i,n),this.m_joySwipe.background.y=-a,this.m_isLandscape=e}},e.prototype.onPreGameShow=function(){this.m_preGamePopup=new c,SingletonClass.i.currentPopup=this.m_preGamePopup,SingletonClass.i.dispatchEvent(new NewEvent(SingletonClass.CHANGE_POPUP))},e.prototype.onPreGameHide=function(){this.m_startGame=!0,this.m_playerBC.move=!0,SingletonClass.i.dispatchEvent(new NewEvent(SingletonClass.CLOSE_POPUP)),this.m_preGamePopup=null},e.prototype.onLevelUpShow=function(){SingletonClass.i.currentPopup=new U,SingletonClass.i.dispatchEvent(new NewEvent(SingletonClass.CHANGE_POPUP))},e.prototype.onLevelUpHide=function(){this.m_startNextLevel=!0,this.m_playerBC.move=!0,SingletonClass.i.dispatchEvent(new NewEvent(SingletonClass.CLOSE_POPUP))},e.prototype.onGameOver=function(t){clearInterval(this.m_timerId),t==e.WINNER?SingletonClass.i.currentPopup=new u:t==e.LOOSER&&(SingletonClass.i.currentPopup=new _),SingletonClass.i.dispatchEvent(new NewEvent(SingletonClass.CHANGE_POPUP))},e.prototype.update=function(){if(t.prototype.update.call(this),0!=this.m_startGame&&0!=this.m_startNextLevel){var e=!1,i=!1,n=!1,o=!1,s=!1;e=this.m_playerBC.testCollision(this.m_waterBC),i=this.m_playerBC.testCollision(this.m_landBC),s=this.m_playerBC.testCollision(this.m_homeMgrBC);for(var r=this.m_carArray.length;r--;)this.m_playerBC.testCollision(this.m_carArray[r])&&(n=!0);for(r=this.m_troncoArray.length;r--;)this.m_playerBC.testCollision(this.m_troncoArray[r])&&(o=!0,this.m_playerBC.x>this.m_limitLeft-.5*this.m_tileWidth&&this.m_playerBC.x<this.m_limitRight+.5*this.m_tileWidth?this.m_playerBC.x+=this.m_troncoArray[r].speed:this.lostLive());if(this.m_scoreTxt.text=this.m_playerBC.score.toString(),this.m_liveTxt.text=this.m_lifes.toString(),this.m_homesTxt.text=this.m_houses.toString(),this.m_levelTxt.text=this.m_level.toString(),(e||n)&&0==o&&this.lostLive(),i&&(s?this.arriveHouse():this.lostLive()),this.m_isLandscape){var a=Capabilities.i.widthGame/15,l=MathUtils.floor(Capabilities.i.heightGame/a),h=this.m_playerBC.currentTile-l+2;h>-1?this.m_scoreFrogerMc.position.y=Capabilities.i.initX+a*h:this.m_scoreFrogerMc.position.y=Capabilities.i.initX}}},e.prototype.lostLive=function(){this.m_time=60,this.m_timeTxt.text=this.m_time.toString(),this.m_playerBC.x=this.m_initFrogerX,this.m_playerBC.y=this.m_initFrogerY,this.m_playerBC.reset(),this.m_lifes--,this.m_lifes<=0&&this.onGameOver(e.LOOSER)},e.prototype.arriveHouse=function(){if(this.m_time=60,this.m_timeTxt.text=this.m_time.toString(),this.m_playerBC.x=this.m_initFrogerX,this.m_playerBC.y=this.m_initFrogerY,this.m_playerBC.reset(),this.m_houses++,this.m_houses>=5){this.m_homeMgrBC.resetFrogerHouse(),this.m_level++,this.m_houses=0,this.m_startNextLevel=!1,this.m_playerBC.move=!1,this.m_countDownLevelUp=2;var t,e=this.m_carArray.length;for(t=0;t<e;t++)this.m_carArray[t].speedHelp+=.5*Capabilities.i.textureRatio;for(e=this.m_troncoArray.length,t=0;t<e;t++)this.m_troncoArray[t].speedHelp+=.5*Capabilities.i.textureRatio}},Object.defineProperty(e.prototype,"bgFroggerPc",{set:function(t){this.m_bgFroggerPc=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"landGp",{set:function(t){this.m_landGp=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"waterGp",{set:function(t){this.m_waterGp=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreFrogerMc",{set:function(t){this.m_scoreFrogerMc=t,this.m_scoreTxt=this.m_scoreFrogerMc.getChildByName("scoreTxt"),this.m_homesTxt=this.m_scoreFrogerMc.getChildByName("homesTxt"),this.m_levelTxt=this.m_scoreFrogerMc.getChildByName("levelTxt"),this.m_liveTxt=this.m_scoreFrogerMc.getChildByName("liveTxt"),this.m_timeTxt=this.m_scoreFrogerMc.getChildByName("timeTxt")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"homesMc",{set:function(t){this.m_homesMc=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playerTile",{get:function(){return this.m_playerBC.currentTile},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"joysPoint",{set:function(t){this.m_joysPoint=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"joySwipe",{set:function(t){this.m_joySwipe=t},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),clearInterval(this.m_timerId),this.m_playerBC.destroy(),this.m_joysPoint&&this.m_joysPoint.destroy(),this.m_joySwipe&&this.m_joySwipe.destroy(),this.m_playerBC=null,this.m_joysPoint=null,this.m_joySwipe=null,this.m_preGamePopup=null},e.RANDOM_MAX=5,e.LOOSER=0,e.WINNER=1,e}(GameClient),f=function(t){function e(){t.call(this),Logs.log("CreditsPopup")}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"creditsPopup","img/graphics/screens.json"),this.addBindHandlers(),this.setCenterButton("closeBtn",this.m_onCloseHandlerBind)},e.prototype.addBindHandlers=function(){var t=this;this.m_onCloseHandlerBind=function(e){return t.onCloseHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onCloseHandlerBind=null},e.prototype.onCloseHandler=function(t){this.s.dispatchEvent(new NewEvent(SingletonClass.CLOSE_POPUP))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),Logs.log("destroy CreditsPopup ------------------------------")},e}(ParentPopup),g=function(t){function e(e){var i=this;t.call(this),this.onNspDisconnect=function(){i.s.currentPopup=new H,i.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_POPUP))},this.m_gameBuffer=e,this.m_isLandscape=!1,Constants.TILE_WIDTH=Capabilities.i.isDesktop?81:136,this.addBindHandlers(),this.loadGame()}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"gameView","img/graphics/game.json")},e.prototype.addBindHandlers=function(){var t=this;this.m_onCloseHandlerBind=function(e){return t.onCloseHandler(e)},this.m_onCreditsHandlerBind=function(e){return t.onCreditsHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onCloseHandlerBind=null,this.m_onCreditsHandlerBind=null},e.prototype.loadGame=function(){Capabilities.i.isDesktop&&(this.setCornerButton("closeBtn",this.m_onCloseHandlerBind,Support.RIGHT_UP),this.setCornerButton("creditsBtn",this.m_onCreditsHandlerBind,Support.RIGHT_DOWN)),null==this.m_game&&(this.m_game=new y(this.m_gameBuffer),this.m_game.bgFroggerPc=this.getChildByName("bgFroggerPc"),this.m_game.scoreFrogerMc=this.getChildByName("scoreFrogerMc"),this.m_game.landGp=this.getChildByName("landGp"),this.m_game.waterGp=this.getChildByName("waterGp"),this.m_game.homesMc=this.getChildByName("homesMc"),Capabilities.i.isDesktop?(this.m_joysHelp=new JoysPoint,this.m_game.joysPoint=this.m_joysHelp):(this.m_joysHelp=new JoySwipe,this.m_game.joySwipe=this.m_joysHelp),this.m_game.init(),this.addChild(this.m_game.content)),this.addChild(this.m_joysHelp)},e.prototype.onCreditsHandler=function(t){null==this.s.currentPopup&&(this.s.currentPopup=new f,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_POPUP)))},e.prototype.onCloseHandler=function(t){CssUtils.fullScreen()},e.prototype.update=function(){if(t.prototype.update.call(this),null!=this.m_game&&this.m_game.update(),this.m_isLandscape){var e=Capabilities.i,i=e.widthGame/15,n=this.m_game.playerTile-MathUtils.floor(e.heightGame/i)+2;n>-1?this.content.position.y=e.initY-i*n:this.content.position.y=e.initY}},e.prototype.changeOrientation=function(t){null!=this.m_game&&this.m_game.changeOrientation(t);var e=Capabilities.i,i=e.widthGame/15,n=i/Constants.TILE_WIDTH/e.textureRatio;this.content.scale.x=n,this.content.scale.y=n;var o=MathUtils.floor(.5*(e.widthGame-15*i)),s=MathUtils.floor(.5*(e.heightGame-15*i));this.content.position.x=e.initX+o,this.content.position.y=t?e.initY:e.initY+s,this.m_isLandscape=t},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),this.m_game&&this.m_game.destroy(),this.m_game=null,this.m_joysHelp=null,this.m_gameBuffer=null},e}(ParentView),B=function(t){function e(){t.call(this),Logs.log("SinglePlayerView")}return o(e,t),e.prototype.init=function(){if(t.prototype.init.call(this,"singlePlayerView","img/graphics/screens.json"),this.addBindHandlers(),this.setCornerButton("closeBtn",this.m_onCloseHandlerBind,Support.RIGHT_UP),this.setCenterButton("memoryBtn",this.m_onMemoryHandlerBind),this.m_onLoadGame=null!=Globals.s_atlasLoaded["img/graphics/game.json"],this.m_onMemoryPress=!1,0==this.m_onLoadGame){var e=["img/graphics/#textureType#/game.sympck"];this.m_loaderGame=new Loader(this.m_onCompleteLoaderBind),this.m_loaderGame.assetsToLoader=e,this.m_loaderGame.load(!1)}},e.prototype.addBindHandlers=function(){var t=this;this.m_onCloseHandlerBind=function(e){return t.onCloseHandler(e)},this.m_onMemoryHandlerBind=function(e){return t.onMemoryHandler(e)},this.m_onCompleteLoaderBind=function(){return t.completeLoader()}},e.prototype.removeBindHandlers=function(){this.m_onCloseHandlerBind=null,this.m_onMemoryHandlerBind=null,this.m_onCompleteLoaderBind=null},e.prototype.progressLoader=function(){},e.prototype.completeLoader=function(){this.m_onCompleteLoaderBind=null,this.m_loaderGame.destroy(),this.m_loaderGame=null,this.m_onLoadGame=!0,this.loadGame()},e.prototype.loadGame=function(){this.m_onLoadGame&&this.m_onMemoryPress&&(this.s.currentView=new g(null),this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW)))},e.prototype.onCloseHandler=function(t){this.s.currentView=new N,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onMemoryHandler=function(t){0==this.m_onLoadGame&&this.s.preLoader.show(),this.m_onMemoryPress=!0,this.loadGame()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),this.m_loaderGame&&this.m_loaderGame.destroy(),this.m_loaderGame=null},e}(ParentView),v=function(t){function e(){t.call(this),Logs.log("RankingView")}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"rankingView","img/graphics/screens.json"),this.addBindHandlers(),this.setCenterButton("leftBtn",this.m_onLeftHandlerBind),this.setCenterButton("rightBtn",this.m_onRightHandlerBind)},e.prototype.addBindHandlers=function(){var t=this;this.m_onLeftHandlerBind=function(e){return t.onLeftHandler(e)},this.m_onRightHandlerBind=function(e){return t.onRightHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onLeftHandlerBind=null,this.m_onRightHandlerBind=null},e.prototype.onLeftHandler=function(t){this.s.currentView=new N,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onRightHandler=function(t){this.s.currentView=new N,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),Logs.log("destroy RankingView ------------------------------")},e}(ParentView),C=function(t){function e(){t.call(this),Logs.log("OptionsView")}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"optionsView","img/graphics/screens.json"),this.addBindHandlers(),
this.setBackground()},e.prototype.addBindHandlers=function(){var t=this;this.m_onCloseHandlerBind=function(e){return t.onCloseHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onCloseHandlerBind=null},e.prototype.setBackground=function(){this.setCornerButton("closeBtn",this.m_onCloseHandlerBind,Support.RIGHT_UP)},e.prototype.onCloseHandler=function(t){this.s.currentView=new N,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),this.m_epsy&&this.m_epsy.destroy(),this.m_epsy=null,Logs.log("destroy OptionsView------------------------------")},e}(ParentView),H=function(t){function e(){t.call(this),Logs.log("DisconnectPopup")}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"disconnectPopup","img/graphics/screens.json"),this.addBindHandlers(),this.m_closeBtn=this.setCornerButton("closeBtn",this.m_onCloseHandlerBind,Support.RIGHT_UP)},e.prototype.addBindHandlers=function(){var t=this;this.m_onCloseHandlerBind=function(e){return t.onCloseHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onCloseHandlerBind=null},e.prototype.onCloseHandler=function(t){this.m_closeBtn.enabled=!1,this.s.currentView=new N,this.s.dispatchEvent(new NewEvent(SingletonClass.CLOSE_POPUP)),this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),this.m_closeBtn=null,Logs.log("destroy DisconnectPopup ------------------------------")},e}(ParentPopup),w=function(t){function e(e){var i=this;t.call(this),this.onNspDisconnect=function(){i.s.currentPopup=new H,i.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_POPUP))},this.addUsers(e)}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"roomView","img/graphics/screens.json"),this.m_nsp=IODynNsp.i,this.addBindHandlers(),this.m_readyBtn=this.setCenterButton("readyBtn",this.m_onReadyHandlerBind),this.m_leaveBtn=this.setCornerButton("leaveBtn",this.m_onLeaveHandlerBind,Support.RIGHT_UP),this.m_nsp.socketNsp.on("@\\mO6",this.m_onLeaveRoomServerBind),this.m_nsp.socketNsp.on("{$kV'",this.m_onUserJoinRoomServerBind),this.m_nsp.socketNsp.on("5v$g=",this.m_onUserLeaveRoomServerBind),this.m_nsp.socketNsp.on("xj,ok",this.m_onReadyRoomServerBind),this.m_nsp.socketNsp.on("6|]&<",this.m_onPreGameServerBind),this.m_nsp.onNspDisconnect=this.onNspDisconnect},e.prototype.addBindHandlers=function(){var t=this;this.m_onReadyHandlerBind=function(e){return t.onReadyHandler(e)},this.m_onLeaveHandlerBind=function(e){return t.onLeaveHandler(e)},this.m_onLeaveRoomServerBind=function(e){return t.onLeaveRoomServer(e)},this.m_onUserJoinRoomServerBind=function(e){return t.onUserJoinRoomServer(e)},this.m_onUserLeaveRoomServerBind=function(e){return t.onUserLeaveRoomServer(e)},this.m_onReadyRoomServerBind=function(e){return t.onReadyRoomServer(e)},this.m_onPreGameServerBind=function(e){return t.onPreGameServer(e)}},e.prototype.removeBindHandlers=function(){this.m_onReadyHandlerBind=null,this.m_onLeaveHandlerBind=null,this.m_onLeaveRoomServerBind=null,this.m_onUserJoinRoomServerBind=null,this.m_onUserLeaveRoomServerBind=null,this.m_onReadyRoomServerBind=null,this.m_onPreGameServerBind=null},e.prototype.addUsers=function(t){var e=new ByteArray(t);this.m_nameRoom=e.readString;var i=e.readUInt8;console.log("totalPlayers ",i);var n,o;for(o=0;o<i;o++)n=new BitmapText("",{font:"40pt Desyrel"}),e.readString,n.text=e.readString,e.readUInt8,e.readUInt32,e.readUInt16,e.readUInt32,e.readUInt32,e.readUInt32,n.position.y=50*o*Capabilities.i.textureRatio;e.destroy(),e=null,n=null},e.prototype.onUserJoinRoomServer=function(t){},e.prototype.onLeaveRoomServer=function(t){this.s.currentView=new S,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onUserLeaveRoomServer=function(t){},e.prototype.onReadyRoomServer=function(t){console.log("onReadyRoomServer +++++++ ",t.name," _data.x ",t.x)},e.prototype.onPreGameServer=function(t){this.s.currentView=new g(t),this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onReadyHandler=function(t){this.m_readyBtn.enabled=!1,this.m_nsp.emitNsp("[2X.)")},e.prototype.onLeaveHandler=function(t){this.m_leaveBtn.enabled=!1,this.m_nsp.emitNsp('_Ol2"')},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.m_nsp.socketNsp.off("@\\mO6",this.m_onLeaveRoomServerBind),this.m_nsp.socketNsp.off("{$kV'",this.m_onUserJoinRoomServerBind),this.m_nsp.socketNsp.off("5v$g=",this.m_onUserLeaveRoomServerBind),this.m_nsp.socketNsp.off("xj,ok",this.m_onReadyRoomServerBind),this.m_nsp.socketNsp.off("6|]&<",this.m_onPreGameServerBind),this.removeBindHandlers(),this.m_readyBtn=null,this.m_leaveBtn=null,this.m_nsp=null},e}(ParentView),S=function(t){function e(){var e=this;t.call(this),this.onNspDisconnect=function(t){e.s.currentPopup=new H,e.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_POPUP))},this.onIntervalGetRoomsNs=function(){e.m_nsp.emitNsp("8KLO6")},this.onMainConnectHandler=function(){e.s.currentView=new x,e.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))}}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"nameSpaceView","img/graphics/screens.json"),this.m_nsp=IODynNsp.i,this.addBindHandlers(),this.setBackground(),this.m_nsp.socketNsp.on("7DM}9",this.m_onGetRoomsNsServerBind),this.m_nsp.socketNsp.on("&iPBl",this.m_onGetUsersNsServerBind),this.m_nsp.socketNsp.on("]}#Lx",this.m_onJoinRoomNsServerBind),this.m_nsp.socketNsp.on("nb5El",this.m_onJoinRoomIsFullServerBind),this.m_nsp.socketNsp.on("/[:^l",this.m_onUserJoinNsServerBind),this.m_nsp.socketNsp.on("mhkGk",this.m_onUserLeaveNsServerBind),this.m_nsp.socketNsp.on("Gu9-C",this.m_onListRoomNsServerBind),this.m_nsp.socketNsp.on("4by+d",this.m_onRemoveRoomNsServerBind),IOMain.i.onMainDisconnect=null,this.m_nsp.onNspDisconnect=this.onNspDisconnect,this.m_timerId=setInterval(this.onIntervalGetRoomsNs,45e3)},e.prototype.addBindHandlers=function(){var t=this;this.m_onCreateRoomHandlerBind=function(e){return t.onCreateRoomHandler(e)},this.m_onJoinRoomHandlerBind=function(e){return t.onJoinRoomHandler(e)},this.m_onCloseHandlerBind=function(e){return t.onCloseHandler(e)},this.m_onGetRoomsNsServerBind=function(e){return t.onGetRoomsNsServer(e)},this.m_onGetUsersNsServerBind=function(e){return t.onGetUsersNsServer(e)},this.m_onJoinRoomNsServerBind=function(e){return t.onJoinRoomNsServer(e)},this.m_onJoinRoomIsFullServerBind=function(e){return t.onJoinRoomIsFullServer(e)},this.m_onUserJoinNsServerBind=function(e){return t.onUserJoinNsServer(e)},this.m_onUserLeaveNsServerBind=function(e){return t.onUserLeaveNsServer(e)},this.m_onListRoomNsServerBind=function(e){return t.onListRoomNsServer(e)},this.m_onRemoveRoomNsServerBind=function(e){return t.onRemoveRoomNsServer(e)},this.m_onClickNameRoomBind=function(e){return t.onClickNameRoom(e)},this.m_clickJoinRoomBind=function(e){return t.clickJoinRoom(e)}},e.prototype.removeBindHandlers=function(){this.m_onCreateRoomHandlerBind=null,this.m_onJoinRoomHandlerBind=null,this.m_onCloseHandlerBind=null,this.m_onGetRoomsNsServerBind=null,this.m_onGetUsersNsServerBind=null,this.m_onJoinRoomNsServerBind=null,this.m_onJoinRoomIsFullServerBind=null,this.m_onUserJoinNsServerBind=null,this.m_onUserLeaveNsServerBind=null,this.m_onListRoomNsServerBind=null,this.m_onRemoveRoomNsServerBind=null,this.m_onClickNameRoomBind=null,this.m_clickJoinRoomBind=null},e.prototype.onGetRoomsNsServer=function(t){this.addRoomClient(t)},e.prototype.onGetUsersNsServer=function(t){this.addUserClient(t)},e.prototype.onJoinRoomNsServer=function(t){this.s.currentView=new w(t),this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onJoinRoomIsFullServer=function(t){this.m_joinBtn.enabled=!0,this.m_createBtn.enabled=!0},e.prototype.onUserJoinNsServer=function(t){},e.prototype.onUserLeaveNsServer=function(t){this.addUserClient(t)},e.prototype.onListRoomNsServer=function(t){var e=new ByteArray(t);e.readString;var i=e.readString,n=e.readUInt8,o=e.readString,s=new BitmapText("",{font:"70px Desyrel"},(!1));s.text=i+" : "+n+" : "+o;var r;s.on("click",this.m_clickJoinRoomBind),s.on("tap",this.m_clickJoinRoomBind),e.destroy(),e=null,r=null,s=null},e.prototype.onRemoveRoomNsServer=function(t){this.addRoomClient(t)},e.prototype.addRoomClient=function(t){var e,i,n,o,s,r=new ByteArray(t),a=r.readUInt16,l=0,h=this;for(l=0;l<a;l++)e=new BitmapText("",{font:"70px Desyrel"},(!1)),r.readString,n=r.readString,o=r.readUInt8,s=r.readString,e.text=n+" : "+o+" : "+s,e.position.y=70*l*Capabilities.i.textureRatio,e.on("click",h.m_clickJoinRoomBind),e.on("tap",h.m_clickJoinRoomBind);r.destroy(),r=null,i=null,e=null},e.prototype.addUserClient=function(t){var e,i=new ByteArray(t),n=i.readUInt16,o=0;for(o=0;o<n;o++)e=new BitmapText("",{font:"40px Desyrel"},(!1)),e.text=i.readString,i.readString,e.position.y=50*o*Capabilities.i.textureRatio;i.destroy(),i=null,e=null},e.prototype.clickJoinRoom=function(t){var e=t.target.children[0].text;new ByteArray;console.log("nameRoom ",e)},e.prototype.setBackground=function(){this.m_createBtn=this.setCenterButton("createBtn",this.m_onCreateRoomHandlerBind),this.m_createBtn=this.setCenterButton("joinBtn",this.m_onJoinRoomHandlerBind),this.m_closeBtn=this.setCornerButton("closeBtn",this.m_onCloseHandlerBind,Support.RIGHT_UP),this.m_titleTxt=new BitmapText("",{font:"50px Desyrel"}),this.m_titleTxt.position.x=50*Capabilities.i.textureRatio,this.m_titleTxt.position.y=900*Capabilities.i.textureRatio,this.m_titleTxt.text=this.m_nsp.nameNsp,this.addChild(this.m_titleTxt.content);var t={};t.y=4.75,t.text="empty",t.maxChars=15,t.width=168,t.type="input",t.height=27,t.style={align:"left",font:"50px Desyrel",fill:"#000000"},t.x=0,this.m_nameRoomTxt=new Input(null,null,null,t),this.m_quad=new PIXI.Graphics,this.m_quad.beginFill(16777215),this.m_quad.drawRect(0,0,300,50),this.m_quad.alpha=.3,this.m_quad.interactive=!0,this.m_quad.on("click",this.m_onClickNameRoomBind),this.m_quad.on("tap",this.m_onClickNameRoomBind),Capabilities.i.isDesktop&&this.m_nameRoomTxt.addFocus()},e.prototype.onCreateRoomHandler=function(t){if(""!=this.m_nameRoomTxt.text){this.m_createBtn.enabled=!1;var e=new ByteArray;e.writeString(this.m_nameRoomTxt.text),this.m_nsp.emitNsp("pnNAJ",e.buffer),e.destroy(),e=null}},e.prototype.onJoinRoomHandler=function(t){if(""!=this.m_nameRoomTxt.text){this.m_joinBtn.enabled=!1;var e=new ByteArray;e.writeString(this.m_nameRoomTxt.text),this.m_nsp.emitNsp("s[|YD",e.buffer),e.destroy(),e=null}},e.prototype.onCloseHandler=function(t){this.m_closeBtn.enabled=!1,null!=this.m_nsp&&this.m_nsp.leaveToMainServer(this.onMainConnectHandler)},e.prototype.onClickNameRoom=function(t){this.m_nameRoomTxt.addFocus()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.m_nsp.socketNsp.off("7DM}9",this.m_onGetRoomsNsServerBind),this.m_nsp.socketNsp.off("&iPBl",this.m_onGetUsersNsServerBind),this.m_nsp.socketNsp.off("]}#Lx",this.m_onJoinRoomNsServerBind),this.m_nsp.socketNsp.off("nb5El",this.m_onJoinRoomIsFullServerBind),this.m_nsp.socketNsp.off("/[:^l",this.m_onUserJoinNsServerBind),this.m_nsp.socketNsp.off("mhkGk",this.m_onUserLeaveNsServerBind),this.m_nsp.socketNsp.off("Gu9-C",this.m_onListRoomNsServerBind),this.m_nsp.socketNsp.off("4by+d",this.m_onRemoveRoomNsServerBind),this.m_quad.off("click",this.m_onClickNameRoomBind),this.m_quad.off("tap",this.m_onClickNameRoomBind),this.removeBindHandlers(),clearInterval(this.m_timerId),this.m_nameRoomTxt.destroy(),this.m_createBtn=null,this.m_joinBtn=null,this.m_titleTxt=null,this.m_quad=null,this.m_nameRoomTxt=null,this.m_nsp=null},e}(ParentView),x=function(t){function e(){var e=this;t.call(this),this.onNsConnectHandler=function(t){IODynNsp.i.connect(t,e.onConnectHandler)},this.onConnectHandler=function(){e.s.currentView=new S,e.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},this.onMainDisconnect=function(){e.s.currentPopup=new H,e.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_POPUP))},this.onLeaveToMainMenuHandler=function(){e.s.currentView=new N,e.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))}}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"serverView","img/graphics/screens.json"),this.m_io=IOMain.i,this.addBindHandlers(),this.setBackground(),this.m_io.onMainDisconnect=this.onMainDisconnect},e.prototype.addBindHandlers=function(){var t=this;this.m_onServer1HandlerBind=function(e){return t.onServer1Handler(e)},this.m_onServer2HandlerBind=function(e){return t.onServer2Handler(e)},this.m_onServer3HandlerBind=function(e){return t.onServer3Handler(e)},this.m_closeHandlerBind=function(e){return t.onCloseHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onServer1HandlerBind=null,this.m_onServer2HandlerBind=null,this.m_onServer3HandlerBind=null,this.m_closeHandlerBind=null},e.prototype.setBackground=function(){this.m_server1Btn=this.setCenterButton("server1Btn",this.m_onServer1HandlerBind),this.m_server2Btn=this.setCenterButton("server2Btn",this.m_onServer2HandlerBind),this.m_server3Btn=this.setCenterButton("server3Btn",this.m_onServer3HandlerBind),this.setCornerButton("closeBtn",this.m_closeHandlerBind,Support.RIGHT_UP);var t=new PIXI.extras.BitmapText("bitmap fonts "+this.m_io.socketMain.io.engine.pingIntervalTimer,{font:"35px Desyrel",align:"right"});t.position.x=320*Capabilities.i.textureRatio,t.position.y=320*Capabilities.i.textureRatio,t.scale.x=2,t.scale.y=2;var e=new PIXI.extras.BitmapText("BITMAP SCORE "+this.m_io.socketMain.io.engine.pingTimeoutTimer,{font:"35px BadaBoomBB",align:"right"});e.position.x=420*Capabilities.i.textureRatio,e.position.y=420*Capabilities.i.textureRatio,e.scale.x=2,e.scale.y=2,console.log("----------------------------------"),console.log("engine hostname ",this.m_io.socketMain.io.engine.hostname),console.log("engine port ",this.m_io.socketMain.io.engine.port),console.log("engine policyPort ",this.m_io.socketMain.io.engine.policyPort),console.log("engine rememberUpgrade ",this.m_io.socketMain.io.engine.rememberUpgrade),console.log("engine onlyBinaryUpgrades ",this.m_io.socketMain.io.engine.onlyBinaryUpgrades),console.log("engine pingInterval ",this.m_io.socketMain.io.engine.pingInterval),console.log("engine pingIntervalTimer ",this.m_io.socketMain.io.engine.pingIntervalTimer),console.log("engine pingTimeout ",this.m_io.socketMain.io.engine.pingTimeout),console.log("engine pingTimeoutTimer ",this.m_io.socketMain.io.engine.pingTimeoutTimer),console.log("----------------------------------")},e.prototype.onServer1Handler=function(t){this.m_server1Btn.enabled=!1,this.m_io.joinDynNsp({globalNsp:"server_1",nameUser:"Guest_"+this.m_io.socketMain.io.engine.id,guest:!0},this.onNsConnectHandler)},e.prototype.onServer2Handler=function(t){this.m_server2Btn.enabled=!1,this.m_io.joinDynNsp({globalNsp:"server_2",nameUser:"Guest_"+this.m_io.socketMain.io.engine.id,guest:!0},this.onNsConnectHandler)},e.prototype.onServer3Handler=function(t){this.m_server3Btn.enabled=!1,this.m_io.joinDynNsp({globalNsp:"server_3",nameUser:"Guest_"+this.m_io.socketMain.io.engine.id,guest:!0},this.onNsConnectHandler)},e.prototype.onCloseHandler=function(t){this.m_io.onLeaveToMainMenu(this.onLeaveToMainMenuHandler)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),this.m_server1Btn=null,this.m_server2Btn=null,this.m_server3Btn=null,this.m_io=null},e}(ParentView),N=function(t){function e(){var e=this;t.call(this),this.onConnectHandler=function(){e.s.currentView=new x,e.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},this.onMainDisconnect=function(){e.s.currentPopup=new H,e.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_POPUP))}}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"mainMenuView","img/graphics/screens.json"),this.addBindHandlers(),this.setBackground(),this.m_io=IOMain.i,this.m_io.onMainDisconnect=this.onMainDisconnect;var e=1436291840,i=new Date;i.setTime(1e3*e),console.log("today.getUTCSeconds() ",i.getUTCSeconds()),console.log("today.getUTCMinutes() ",i.getUTCMinutes()),console.log("today.getUTCHours() ",i.getUTCHours()),console.log("today.getUTCDay() ",i.getUTCDay()),console.log("today.getUTCDate() ",i.getUTCDate()),console.log("today.getutcmonth() ",i.getUTCMonth()),console.log("today.getUTCFullYear() ",i.getUTCFullYear())},e.prototype.addBindHandlers=function(){var t=this;this.m_onSingleHandlerBind=function(e){return t.onSingleHandler(e)},this.m_onMultiHandlerBind=function(e){return t.onMultiHandler(e)},this.m_onRankingHandlerBind=function(e){return t.onRankingHandler(e)},this.m_onOptionsHandlerBind=function(e){return t.onOptionsHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onSingleHandlerBind=null,this.m_onMultiHandlerBind=null,this.m_onRankingHandlerBind=null,this.m_onOptionsHandlerBind=null},e.prototype.setBackground=function(){this.setCenterButton("singleBtn",this.m_onSingleHandlerBind),this.setCenterButton("multiBtn",this.m_onMultiHandlerBind),this.setCenterButton("rankingBtn",this.m_onRankingHandlerBind),this.setCenterButton("optionsBtn",this.m_onOptionsHandlerBind),this.m_audioSprite=new AudioSprite("10","img/sounds/combo.json")},e.prototype.onSingleHandler=function(t){this.s.currentView=new B,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onMultiHandler=function(t){this.m_audioSprite&&this.m_audioSprite.play()},e.prototype.onRankingHandler=function(t){this.s.currentView=new v,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onOptionsHandler=function(t){this.s.currentView=new C,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),null!=this.m_audioSprite&&this.m_audioSprite.destroy(),this.m_audioSprite=null,this.m_io=null},e}(ParentView),E=function(t){function e(){t.call(this)}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"welcomeView","img/graphics/screens.json"),this.addBindHandlers(),this.setBackground()},e.prototype.addBindHandlers=function(){var t=this;this.m_onPlayHandlerBind=function(e){return t.onPlayHandler(e)},this.m_onNewUserHandlerBind=function(e){return t.onNewUserHandler(e)},this.m_onClickTapItemBind=function(e){return t.onClickTapItem(e)}},e.prototype.removeBindHandlers=function(){this.m_onPlayHandlerBind=null,this.m_onNewUserHandlerBind=null,this.m_onClickTapItemBind=null},e.prototype.setBackground=function(){this.setCenterButton("playBtn",this.m_onPlayHandlerBind);var t=new BitmapText("",{fontName:"Desyrel",fontSize:100,fill:"black",align:"left"});t.text="WEBGL: "+(Capabilities.i.isWebGLRenderer?" JA ":" NO "),this.addChild(t.content),t.position.x=(700-.5*t.width)*Capabilities.i.textureRatio,t.position.y=480*Capabilities.i.textureRatio},e.prototype.onPlayHandler=function(t){this.s.currentView=new N,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onNewUserHandler=function(t){this.s.currentView=new s,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onClickTapItem=function(t){var e=t.target,i=e.children[0].text;OfflineData.removeUser(i),this.m_tempPan.removeItem(e.children[0].text)},e.prototype.update=function(){t.prototype.update.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers()},e}(ParentView),R=function(t){function e(){t.call(this),this.addBindBungeoLoader(),this.addBindBungeoLoaderGame(),this.s.preLoader=new G("img/graphics/#textureType#/loader.sympck",this.m_onCompleteLoaderPreBind),OfflineData.loadCurrentUser()}return o(e,t),e.prototype.addBindBungeoLoader=function(){var t=this;this.m_onCompleteLoaderPreBind=function(){return t.completeLoaderPre()},this.m_onCompleteLoaderBind=function(){return t.completeLoader()}},e.prototype.removeBindBungeoLoader=function(){this.m_onCompleteLoaderPreBind=null,this.m_onCompleteLoaderBind=null},e.prototype.addBindBungeoLoaderGame=function(){var t=this;this.m_onCompleteLoaderGameBind=function(){return t.completeLoaderGame()}},e.prototype.removeBindBungeoLoaderGame=function(){this.m_onCompleteLoaderGameBind=null},e.prototype.completeLoaderPre=function(){var t=["img/sounds/combo.json","img/graphics/#textureType#/merge.xml","img/graphics/#textureType#/screens.sympck"];this.m_loader=new Loader(this.m_onCompleteLoaderBind),this.m_loader.assetsToLoader=t,this.m_loader.load()},e.prototype.completeLoader=function(){this.removeBindBungeoLoader(),this.m_loader.destroy(),this.m_loader=null;var t=["img/graphics/#textureType#/game.sympck"];this.m_loaderGame=new Loader(this.m_onCompleteLoaderGameBind),this.m_loaderGame.assetsToLoader=t,this.m_loaderGame.load(!1),null==OfflineData.m_userIdBinary?this.s.currentView=new r:this.s.currentView=new E,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW)),this.p_cheats=new Cheats,this.p_contentConsole.addChild(this.p_cheats.content)},e.prototype.completeLoaderGame=function(){this.removeBindBungeoLoaderGame(),this.m_loaderGame.destroy(),this.m_loaderGame=null},e.prototype.update=function(){t.prototype.update.call(this),this.p_cheats&&this.p_cheats.update()},e.prototype.destroy=function(){this.p_cheats&&this.p_cheats.destroy(),this.p_cheats=null,this.m_loader&&this.m_loader.destroy(),this.m_loader=null,this.m_loaderGame&&this.m_loaderGame.destroy(),this.m_loaderGame=null,this.removeBindBungeoLoader(),this.removeBindBungeoLoaderGame(),t.prototype.destroy.call(this)},e}(Client),P;window.addEventListener("load",t,!1),window.addEventListener("unload",e,!1);var G=function(t){function e(e,i){t.call(this,e,i)}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.loadAssets=function(){t.prototype.loadAssets.call(this),this.m_rightHalf=this.m_movieClip.getChildByName("clock1"),this.m_rightHalf.pivotX=0,this.m_rightHalf.pivotY=this.m_rightHalf.height/2,this.m_rightHalf.content.y+=this.m_rightHalf.height/2,this.m_leftHalf=this.m_movieClip.getChildByName("clock3"),this.m_leftHalf.pivotX=this.m_leftHalf.width,this.m_leftHalf.pivotY=this.m_leftHalf.height/2,this.m_leftHalf.content.x+=this.m_leftHalf.width,this.m_leftHalf.content.y+=this.m_leftHalf.height/2,this.m_rightHalfMidle=this.m_movieClip.getChildByName("clock2"),this.m_rightHalfOver=this.m_movieClip.getChildByName("clock5"),this.m_rightHalfOver.content.alpha=0,this.m_handle=this.m_movieClip.getChildByName("Handle"),this.m_handle.pivotX=15,this.m_handle.pivotY=30,this.m_handle.content.x+=15,this.m_handle.content.y+=30,this.m_count=0},e.prototype.update=function(){this.m_count<this.m_progress&&this.m_count<100&&this.m_count++,this.updateShadow(),this.updateClockHand()},e.prototype.updateShadow=function(){this.m_count<50?(this.m_leftHalf&&(this.m_leftHalf.content.rotation=0),this.m_rightHalf&&(this.m_rightHalf.content.rotation=3.6*this.m_count*Math.PI/180),this.m_rightHalfOver&&(this.m_rightHalfOver.content.alpha=0)):(this.m_rightHalf&&(this.m_rightHalf.content.rotation=Math.PI),this.m_leftHalf&&(this.m_leftHalf.content.rotation=3.6*(this.m_count-50)*Math.PI/180),this.m_rightHalfOver&&(this.m_rightHalfOver.content.alpha=1))},e.prototype.updateClockHand=function(){this.m_handle&&(this.m_handle.content.rotation=(3.6*this.m_count-90)*Math.PI/180)},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(PreLoader),L=function(t){function e(e){t.call(this),this.m_homeSp=e,this.init()}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.p_content=this.m_homeSp.content},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.m_homeSp.destroy(),this.m_homeSp=null},e}(Entity),b=function(t){function e(e){t.call(this),this.m_landGp=e,this.init()}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.p_content=this.m_landGp.content},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.m_landGp.destroy(),this.m_landGp=null},e}(Entity),T=function(t){function e(e){t.call(this),this.m_waterGp=e,this.init()}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.p_content=this.m_waterGp.content},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.m_waterGp.destroy(),this.m_waterGp=null},e}(Entity),U=function(t){function e(){t.call(this)}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"levelPopup","img/graphics/game.json")},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(ParentPopup),I=function(t){function e(){t.call(this),Logs.log("NewsView")}return o(e,t),e.prototype.init=function(){var e=this;t.prototype.init.call(this,"newsView","img/graphics/screens.json"),this.m_onCreateHandlerBind=function(t){return e.onCreateHandler(t)},this.setCenterButton("createBtn",this.m_onCreateHandlerBind)},e.prototype.onCreateHandler=function(t){this.s.currentView=new N,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.m_onCreateHandlerBind=null,Logs.log("destroy NewsView------------------------------")},e}(ParentView),M=function(t){function e(){t.call(this),Logs.log("RegisterView")}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"registerView","img/graphics/screens.json"),this.addBindHandlers(),this.setCenterButton("registerBtn",this.m_onGuestHandlerBind),this.setCenterButton("guestBtn",this.m_onGuestHandlerBind)},e.prototype.addBindHandlers=function(){var t=this;this.m_onRegisterHandlerBind=function(e){return t.onRegisterHandler(e)},this.m_onGuestHandlerBind=function(e){return t.onGuestHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onRegisterHandlerBind=null,this.m_onGuestHandlerBind=null},e.prototype.onRegisterHandler=function(t){console.log("onRegisterHandler ")},e.prototype.onGuestHandler=function(t){OfflineData.addNewGuestUser(),this.s.currentView=new E,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),Logs.log("destroy RegisterView ------------------------------")},e}(ParentView),k=function(t){function e(){t.call(this),Logs.log("MultiplayerView")}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"multiPlayerView","img/graphics/screens.json"),this.addBindHandlers(),this.setCornerButton("closeBtn",this.m_onCloseHandlerBind,Support.RIGHT_UP)},e.prototype.addBindHandlers=function(){var t=this;this.m_onCloseHandlerBind=function(e){return t.onCloseHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onCloseHandlerBind=null},e.prototype.onCloseHandler=function(t){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),Logs.log("destroy MultiplayerView------------------------------")},e}(ParentView),A=function(t){function e(){t.call(this)}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"outdatedMsg","img/graphics/screens.json")},e}(ParentMsg),D=function(t){function e(){t.call(this)}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"portraitMsg","img/graphics/screens.json")},e}(ParentMsg);
//# sourceMappingURL=../sourcemaps/client.js.map
