function t(){document.addEventListener("contextmenu",n,!1),document.addEventListener("mousedown",i,!1),w=new H}function e(){null!=w&&(document.removeEventListener("contextmenu",n,!1),document.removeEventListener("mousedown",i,!1),window.removeEventListener("load",t,!1),window.removeEventListener("unload",e,!1),w.destroy(),w=null)}function n(t){t.preventDefault()}function i(t){if(2==t.button)return console.log("disableclick"),t.preventDefault(),!1}var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=function(t){function e(){var e=t.call(this)||this;return Logs.log("NewUserView"),e}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"newUserView","img/graphics/screens.json"),this.addBindHandlers(),this.setBackground()},e.prototype.addBindHandlers=function(){var t=this;this.m_onRegisterHandlerBind=function(e){return t.onRegisterHandler(e)},this.m_onGuestHandlerBind=function(e){return t.onGuestHandler(e)},this.m_onCloseHandlerBind=function(e){return t.onCloseHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onRegisterHandlerBind=null,this.m_onGuestHandlerBind=null,this.m_onCloseHandlerBind=null},e.prototype.setBackground=function(){this.setCenterButton("registerBtn",this.m_onRegisterHandlerBind,!0,200),this.setCenterButton("guestBtn",this.m_onGuestHandlerBind,!0,200),this.setCornerButton("closeBtn",this.m_onCloseHandlerBind,Support.RIGHT_UP),this.m_nameTxt=this.setInput("nameInp"),this.m_emailTxt=this.setInput("email_Inp")},e.prototype.onRegisterHandler=function(t){return""==this.m_nameTxt.text?(this.m_nameTxt.addFocus(),void this.m_emailTxt.removeFocus()):""==this.m_emailTxt.text?(this.m_nameTxt.removeFocus(),void this.m_emailTxt.addFocus()):(OfflineData.addNewUser(this.m_nameTxt.text,this.m_emailTxt.text),this.s.currentView=new C,void this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW)))},e.prototype.onGuestHandler=function(t){OfflineData.addNewGuestUser(),this.s.currentView=new C,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onCloseHandler=function(t){this.s.currentView=new C,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),this.m_nameTxt=null,this.m_emailTxt=null},e}(ParentView),r=function(t){function e(){var e=t.call(this)||this;return Logs.log("LoginView"),e}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"loginView","img/graphics/screens.json"),this.addBindHandlers(),this.setCenterButton("loginBtn",this.m_onLoginHandlerBind),this.setCenterButton("guestBtn",this.m_onGuestHandlerBind)},e.prototype.addBindHandlers=function(){var t=this;this.m_onLoginHandlerBind=function(e){return t.onLoginHandler(e)},this.m_onGuestHandlerBind=function(e){return t.onGuestHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onLoginHandlerBind=null,this.m_onGuestHandlerBind=null},e.prototype.onLoginHandler=function(t){this.s.currentView=new s,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onGuestHandler=function(t){OfflineData.addNewGuestUser(),this.s.currentView=new C,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),Logs.log("destroy LoginView ------------------------------")},e}(ParentView),a=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"preGamePopup","img/graphics/game.json"),this.addBindHandlers(),this.setBackground()},e.prototype.addBindHandlers=function(){},e.prototype.removeBindHandlers=function(){},e.prototype.setBackground=function(){this.m_countDownTxt=new BitmapText("3",{fontName:"Desyrel",fontSize:100,fill:"black",align:"left"}),this.m_countDownTxt.position.x=.5*(Constants.ASSETS_ZONE_WIDTH-this.m_countDownTxt.width)*Capabilities.i.textureRatio,this.m_countDownTxt.position.y=.5*(Constants.ASSETS_ZONE_HEIGHT-this.m_countDownTxt.height)*Capabilities.i.textureRatio,this.addChild(this.m_countDownTxt.content)},Object.defineProperty(e.prototype,"countDown",{set:function(t){this.m_countDownTxt.text=t},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),this.m_countDownTxt.destroy(),this.m_countDownTxt=null},e}(ParentPopup),l=function(t){function e(){var e=t.call(this)||this;return Logs.log("WinnerPopup"),e}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"winnerPopup","img/graphics/game.json"),this.addBindHandlers(),this.setBackground()},e.prototype.addBindHandlers=function(){var t=this;this.m_onCloseHandlerBind=function(e){return t.onCloseHandler(e)},this.m_onPlayAgainHandlerBind=function(e){return t.onPlayAgainHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onCloseHandlerBind=null},e.prototype.setBackground=function(){this.m_closeBtn=this.setCornerButton("closeBtn",this.m_onCloseHandlerBind,Support.RIGHT_UP),this.m_playAgainBtn=this.setCenterButton("playAgainBtn",this.m_onPlayAgainHandlerBind),this.m_titleTxt=new BitmapText("W I N N E R",{fontName:"Desyrel",fontSize:100,fill:"black",align:"left"}),this.m_titleTxt.position.x=(700-.5*this.m_titleTxt.width)*Capabilities.i.textureRatio,this.m_titleTxt.position.y=480*Capabilities.i.textureRatio,this.addChild(this.m_titleTxt.content)},e.prototype.onCloseHandler=function(t){this.m_closeBtn.enabled=!1,this.onLeaveGameOverServer()},e.prototype.onPlayAgainHandler=function(t){this.m_playAgainBtn.enabled=!1,this.s.currentView=new p(null),this.s.dispatchEvent(new NewEvent(SingletonClass.CLOSE_POPUP)),this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onLeaveGameOverServer=function(){this.s.currentView=new c,this.s.dispatchEvent(new NewEvent(SingletonClass.CLOSE_POPUP)),this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),this.m_titleTxt.destroy(),this.m_closeBtn=null,this.m_playAgainBtn=null,this.m_titleTxt=null},e}(ParentPopup),h=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.m_draw=e,Logs.log("LoserPopup"),n}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"loserPopup","img/graphics/game.json"),this.addBindHandlers(),this.setBackground()},e.prototype.addBindHandlers=function(){var t=this;this.m_onCloseHandlerBind=function(e){return t.onCloseHandler(e)},this.m_onPlayAgainHandlerBind=function(e){return t.onPlayAgainHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onCloseHandlerBind=null,this.m_onPlayAgainHandlerBind=null},e.prototype.setBackground=function(){this.m_closeBtn=this.setCornerButton("closeBtn",this.m_onCloseHandlerBind,Support.RIGHT_UP),this.m_playAgainBtn=this.setCenterButton("playAgainBtn",this.m_onPlayAgainHandlerBind),this.m_titleTxt=new BitmapText("",{fontName:"Desyrel",fontSize:100,fill:"black",align:"left"}),this.m_draw?this.m_titleTxt.text="D R A W":this.m_titleTxt.text="L O O S E R",this.m_titleTxt.position.x=(700-.5*this.m_titleTxt.width)*Capabilities.i.textureRatio,this.m_titleTxt.position.y=480*Capabilities.i.textureRatio,this.addChild(this.m_titleTxt.content)},e.prototype.onCloseHandler=function(t){this.m_closeBtn.enabled=!1,this.onLeaveGameOverServer()},e.prototype.onPlayAgainHandler=function(t){this.m_playAgainBtn.enabled=!1,this.s.currentView=new p(null),this.s.dispatchEvent(new NewEvent(SingletonClass.CLOSE_POPUP)),this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onLeaveGameOverServer=function(){this.s.currentView=new c,this.s.dispatchEvent(new NewEvent(SingletonClass.CLOSE_POPUP)),this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),this.m_titleTxt.destroy()},e}(ParentPopup),m=function(t){function e(n,i){var o=t.call(this)||this;return o.onIntervalGame=function(){var t=Date.now(),n=(t-o.m_startTime,t-o.m_startCrono);o.m_countDown<=0,n>1e3&&(o.m_startCrono=t,o.m_countDown>0?(o.m_countDown--,3==o.m_countDown?o.onPreGameShow():0==o.m_countDown&&(console.log("this.G INIT GAME"),o.onPreGameHide()),o.m_preGamePopup&&(o.m_preGamePopup.countDown=o.m_countDown.toString())):o.m_time>0?(o.m_time--,o.m_timeTxt.text=o.m_time.toString()):(console.log("this.Game Over GAMEOVER_SERVER"),o.onGameOver(e.LOOSER)))},o.m_joystick=i,o.addInfoSingle(),o}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.m_countDown=4,this.m_time=60,this.m_timeTxt.text=this.m_time.toString(),this.m_startGame=!1,this.m_scoreDistance=0,this.m_obstacleGapCount=0,this.m_countItem=0,this.m_obstaclesToAnimate=new Array,this.m_itemsToAnimate=new Array,this.m_joysPoint=new JoysPoint,this.m_limitLeft=this.m_bgLayer11_Sp.position.x,this.m_bgLayer1=new E(this.m_bgLayer11_Sp,"bgLayer1Ins"),this.m_bgLayer1.parallax=.02,this.addEntity(this.m_bgLayer1),this.m_bgLayer2=new E(this.m_bgLayer21_Sp,"bgLayer2Ins"),this.m_bgLayer2.parallax=.2,this.addEntity(this.m_bgLayer2),this.m_bgLayer3=new E(this.m_bgLayer31_Sp,"bgLayer3Ins"),this.m_bgLayer3.parallax=.5,this.addEntity(this.m_bgLayer3),this.m_bgLayer4=new E(this.m_bgLayer41_Sp,"bgLayer4Ins"),this.m_bgLayer4.parallax=1,this.addEntity(this.m_bgLayer4),this.m_playerBC=new P(this.m_heroMc),this.m_joysPoint.pointXY.x=this.m_playerBC.xy.x,this.m_joysPoint.pointXY.y=this.m_playerBC.xy.y,this.addEntity(this.m_playerBC),this.m_playerBC.enableCollisionRectangle(),this.m_graphicsMask=new PIXI.Graphics,this.m_graphicsMask.beginFill(16777215),this.m_graphicsMask.drawRect(0,0,this.m_bgLayer11_Sp.content.width,this.m_bgLayer11_Sp.content.height),this.m_graphicsMask.position.x=this.m_limitLeft,this.m_graphicsMask.position.y=this.m_bgLayer11_Sp.position.y,this.addChild(this.m_graphicsMask),this.p_content.mask=this.m_graphicsMask,this.addChild(this.m_joysPoint),this.content.addChild(this.m_debug)},e.prototype.addInfoSingle=function(){this.m_startTime=Date.now(),this.m_startCrono=this.m_startTime,this.m_timerId=setInterval(this.onIntervalGame,200)},e.prototype.onPreGameShow=function(){this.m_preGamePopup=new a,SingletonClass.i.currentPopup=this.m_preGamePopup,SingletonClass.i.dispatchEvent(new NewEvent(SingletonClass.CHANGE_POPUP))},e.prototype.onPreGameHide=function(){this.m_startGame=!0,SingletonClass.i.dispatchEvent(new NewEvent(SingletonClass.CLOSE_POPUP)),this.m_preGamePopup=null},e.prototype.onGameOver=function(t){clearInterval(this.m_timerId),SingletonClass.i.dispatchEvent(new NewEvent(SingletonClass.CLOSE_POPUP)),t==e.WINNER?SingletonClass.i.currentPopup=new l:t==e.LOOSER&&(SingletonClass.i.currentPopup=new h),SingletonClass.i.dispatchEvent(new NewEvent(SingletonClass.CHANGE_POPUP))},e.prototype.initObstacle=function(){this.m_obstacleGapCount<1200?this.m_obstacleGapCount+=this.m_playerBC.speed:0!=this.m_obstacleGapCount&&(this.m_obstacleGapCount=0,this.createObstacle(Math.ceil(4*Math.random()),1e3*Math.random()+1e3))},e.prototype.createObstacle=function(t,e){var n=Capabilities.i.isDesktop?this.m_bgLayer11_Sp.position.y:Capabilities.i.initGameY,i=.5*Constants.ASSETS_ZONE_HEIGHT*Capabilities.i.textureRatio,o=Capabilities.i.isDesktop?this.m_bgLayer11_Sp.content.height:Capabilities.i.heightGame,s=new b(t,e,(!0),300*Capabilities.i.textureRatio);this.addEntity(s),s.enableCollisionRectangle(),s.x=this.m_limitLeft+this.m_bgLayer11_Sp.content.width,t<=3?Math.random()>.5?(s.y=n+100*Capabilities.i.textureRatio,s.positionMsg="top"):(s.y=n+o-s.height-100*Capabilities.i.textureRatio,s.positionMsg="bottom"):(s.y=i+(o-4*s.height)*(.5-Math.random()),s.positionMsg="middle"),this.m_obstaclesToAnimate.push(s)},e.prototype.animateObstacles=function(){var t,e,n=this.m_obstaclesToAnimate.length-1;for(e=n;e>-1;e--)t=this.m_obstaclesToAnimate[e],0==t.alreadyHit&&this.m_playerBC.testCollision(t)&&(t.alreadyHit=!0,t.content.rotation=(Math.random()>.5?70:-70)*Math.PI/180),t.distance>0?t.distance-=this.m_playerBC.speed:(t.watchOut&&(t.watchOut=!1),t.x-=this.m_playerBC.speed+t.speed),t.x<-t.width&&(this.m_obstaclesToAnimate.splice(e,1),this.removeEntity(t))},e.prototype.createFoodItems=function(){if(Math.random()>.95){var t=new N(Math.ceil(5*Math.random())),e=.5*Constants.ASSETS_ZONE_HEIGHT*Capabilities.i.textureRatio,n=Capabilities.i.isDesktop?this.m_bgLayer11_Sp.content.height:Capabilities.i.heightGame;this.addEntity(t),t.enableCollisionRectangle(),t.x=Capabilities.i.widthGame+50*Capabilities.i.textureRatio,t.y=e+(n-2*this.m_playerBC.height)*(.5-Math.random()),this.m_itemsToAnimate.push(t),this.m_countItem++}},e.prototype.animateItems=function(){var t,e,n=this.m_itemsToAnimate.length-1;for(e=n;e>-1;e--)t=this.m_itemsToAnimate[e],t.x-=this.m_playerBC.speed,this.m_playerBC.testCollision(t)&&(this.m_itemsToAnimate.splice(e,1),this.removeEntity(t)),t.x<-50&&(this.m_itemsToAnimate.splice(e,1),this.removeEntity(t))},e.prototype.update=function(){t.prototype.update.call(this),0!=this.m_startGame&&(this.m_joysPoint&&(this.m_playerBC.pointXY=this.m_joysPoint.pointXY),this.m_bgLayer1.speed=this.m_playerBC.speed,this.m_bgLayer2.speed=this.m_playerBC.speed,this.m_bgLayer3.speed=this.m_playerBC.speed,this.m_bgLayer4.speed=this.m_playerBC.speed,this.initObstacle(),this.animateObstacles(),this.createFoodItems(),this.animateItems())},Object.defineProperty(e.prototype,"timeTxt",{set:function(t){this.m_timeTxt=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"heroMc",{set:function(t){this.m_heroMc=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bgLayer11_Sp",{set:function(t){this.m_bgLayer11_Sp=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bgLayer21_Sp",{set:function(t){this.m_bgLayer21_Sp=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bgLayer31_Sp",{set:function(t){this.m_bgLayer31_Sp=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bgLayer41_Sp",{set:function(t){this.m_bgLayer41_Sp=t},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),clearInterval(this.m_timerId),this.m_joysPoint=null,this.m_joystick=null,this.m_preGamePopup=null},e}(GameClient);m.RANDOM_MAX=5,m.LOOSER=0,m.WINNER=1;var d=function(t){function e(){var e=t.call(this)||this;return Logs.log("CreditsPopup"),e}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"creditsPopup","img/graphics/screens.json"),this.addBindHandlers(),this.setCenterButton("closeBtn",this.m_onCloseHandlerBind)},e.prototype.addBindHandlers=function(){var t=this;this.m_onCloseHandlerBind=function(e){return t.onCloseHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onCloseHandlerBind=null},e.prototype.onCloseHandler=function(t){this.s.dispatchEvent(new NewEvent(SingletonClass.CLOSE_POPUP))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),Logs.log("destroy CreditsPopup ------------------------------")},e}(ParentPopup),p=function(t){function e(e){var n=t.call(this)||this;return n.onNspDisconnect=function(){n.s.currentPopup=new y,n.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_POPUP))},n.m_gameBuffer=e,n.addBindHandlers(),n.loadGame(),n}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"gameView","img/graphics/game.json")},e.prototype.addBindHandlers=function(){var t=this;this.m_onCloseHandlerBind=function(e){return t.onCloseHandler(e)},this.m_onCreditsHandlerBind=function(e){return t.onCreditsHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onCloseHandlerBind=null,this.m_onCreditsHandlerBind=null},e.prototype.loadGame=function(){0==Capabilities.i.isDesktop,null==this.m_game&&(this.m_game=new m(this.m_gameBuffer,this.m_joystick),this.m_timeSp=this.getChildByName("timeSp"),this.m_game.timeTxt=this.m_timeSp.getChildByName("timeTxt"),this.m_game.bgLayer11_Sp=this.getChildByName("bgLayer11_Sp"),this.m_game.bgLayer21_Sp=this.getChildByName("bgLayer21_Sp"),this.m_game.bgLayer31_Sp=this.getChildByName("bgLayer31_Sp"),this.m_game.bgLayer41_Sp=this.getChildByName("bgLayer41_Sp"),this.m_game.heroMc=this.getChildByName("heroMc"),this.m_game.init(),this.addChild(this.m_game.content),this.addChild(this.m_timeSp.content)),Capabilities.i.isDesktop&&(this.setCornerButton("closeBtn",this.m_onCloseHandlerBind,Support.RIGHT_UP),this.setCornerButton("creditsBtn",this.m_onCreditsHandlerBind,Support.RIGHT_DOWN))},e.prototype.onCreditsHandler=function(t){null==this.s.currentPopup&&(this.s.currentPopup=new d,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_POPUP)))},e.prototype.onCloseHandler=function(t){CssUtils.fullScreen()},e.prototype.update=function(){t.prototype.update.call(this),null!=this.m_game&&this.m_game.update()},e.prototype.changeOrientation=function(t){null!=this.m_joystick&&this.m_joystick.changeOrientation(t),null!=this.m_game&&this.m_game.changeOrientation(t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),this.m_game&&this.m_game.destroy(),this.m_joystick&&this.m_joystick.destroy(),this.m_game=null,this.m_joystick=null,this.m_gameBuffer=null,this.m_timeSp=null},e}(ParentView),c=function(t){function e(){var e=t.call(this)||this;return Logs.log("SinglePlayerView"),e}return o(e,t),e.prototype.init=function(){if(t.prototype.init.call(this,"singlePlayerView","img/graphics/screens.json"),this.addBindHandlers(),this.setCornerButton("closeBtn",this.m_onCloseHandlerBind,Support.RIGHT_UP),this.setCenterButton("memoryBtn",this.m_onMemoryHandlerBind),this.m_onLoadGame=null!=Globals.s_atlasLoaded["img/graphics/game.json"],this.m_onMemoryPress=!1,0==this.m_onLoadGame){var e=["img/graphics/#textureType#/game.sympck"];this.m_loaderGame=new Loader(this.m_onCompleteLoaderBind),this.m_loaderGame.assetsToLoader=e,this.m_loaderGame.load(!1)}},e.prototype.addBindHandlers=function(){var t=this;this.m_onCloseHandlerBind=function(e){return t.onCloseHandler(e)},this.m_onMemoryHandlerBind=function(e){return t.onMemoryHandler(e)},this.m_onCompleteLoaderBind=function(){return t.completeLoader()}},e.prototype.removeBindHandlers=function(){this.m_onCloseHandlerBind=null,this.m_onMemoryHandlerBind=null,this.m_onCompleteLoaderBind=null},e.prototype.progressLoader=function(){},e.prototype.completeLoader=function(){this.m_onCompleteLoaderBind=null,this.m_loaderGame.destroy(),this.m_loaderGame=null,this.m_onLoadGame=!0,this.loadGame()},e.prototype.loadGame=function(){this.m_onLoadGame&&this.m_onMemoryPress&&(this.s.currentView=new p(null),this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW)))},e.prototype.onCloseHandler=function(t){this.s.currentView=new v,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onMemoryHandler=function(t){0==this.m_onLoadGame&&this.s.preLoader.show(),this.m_onMemoryPress=!0,this.loadGame()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),this.m_loaderGame&&this.m_loaderGame.destroy(),this.m_loaderGame=null},e}(ParentView),u=function(t){function e(){var e=t.call(this)||this;return Logs.log("RankingView"),e}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"rankingView","img/graphics/screens.json"),this.addBindHandlers(),this.setCenterButton("leftBtn",this.m_onLeftHandlerBind),this.setCenterButton("rightBtn",this.m_onRightHandlerBind)},e.prototype.addBindHandlers=function(){var t=this;this.m_onLeftHandlerBind=function(e){return t.onLeftHandler(e)},this.m_onRightHandlerBind=function(e){return t.onRightHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onLeftHandlerBind=null,this.m_onRightHandlerBind=null},e.prototype.onLeftHandler=function(t){this.s.currentView=new v,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onRightHandler=function(t){this.s.currentView=new v,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),Logs.log("destroy RankingView ------------------------------")},e}(ParentView),_=function(t){function e(){var e=t.call(this)||this;return Logs.log("OptionsView"),e}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"optionsView","img/graphics/screens.json"),this.addBindHandlers(),this.setBackground()},e.prototype.addBindHandlers=function(){var t=this;this.m_onCloseHandlerBind=function(e){return t.onCloseHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onCloseHandlerBind=null},e.prototype.setBackground=function(){this.setCornerButton("closeBtn",this.m_onCloseHandlerBind,Support.RIGHT_UP)},e.prototype.onCloseHandler=function(t){this.s.currentView=new v,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),Logs.log("destroy OptionsView------------------------------")},e}(ParentView),y=function(t){function e(){var e=t.call(this)||this;return Logs.log("DisconnectPopup"),e}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"disconnectPopup","img/graphics/screens.json"),this.addBindHandlers(),this.m_closeBtn=this.setCornerButton("closeBtn",this.m_onCloseHandlerBind,Support.RIGHT_UP)},e.prototype.addBindHandlers=function(){var t=this;this.m_onCloseHandlerBind=function(e){return t.onCloseHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onCloseHandlerBind=null},e.prototype.onCloseHandler=function(t){this.m_closeBtn.enabled=!1,this.s.currentView=new v,this.s.dispatchEvent(new NewEvent(SingletonClass.CLOSE_POPUP)),this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),this.m_closeBtn=null,Logs.log("destroy DisconnectPopup ------------------------------")},e}(ParentPopup),g=function(t){function e(e){var n=t.call(this)||this;return n.onNspDisconnect=function(){n.s.currentPopup=new y,n.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_POPUP))},n.addUsers(e),n}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"roomView","img/graphics/screens.json"),this.m_nsp=IODynNsp.i,this.addBindHandlers(),this.m_readyBtn=this.setCenterButton("readyBtn",this.m_onReadyHandlerBind),this.m_leaveBtn=this.setCornerButton("leaveBtn",this.m_onLeaveHandlerBind,Support.RIGHT_UP),this.m_nsp.socketNsp.on("@\\mO6",this.m_onLeaveRoomServerBind),this.m_nsp.socketNsp.on("{$kV'",this.m_onUserJoinRoomServerBind),this.m_nsp.socketNsp.on("5v$g=",this.m_onUserLeaveRoomServerBind),this.m_nsp.socketNsp.on("xj,ok",this.m_onReadyRoomServerBind),this.m_nsp.socketNsp.on("6|]&<",this.m_onPreGameServerBind),this.m_nsp.onNspDisconnect=this.onNspDisconnect},e.prototype.addBindHandlers=function(){var t=this;this.m_onReadyHandlerBind=function(e){return t.onReadyHandler(e)},this.m_onLeaveHandlerBind=function(e){return t.onLeaveHandler(e)},this.m_onLeaveRoomServerBind=function(e){return t.onLeaveRoomServer(e)},this.m_onUserJoinRoomServerBind=function(e){return t.onUserJoinRoomServer(e)},this.m_onUserLeaveRoomServerBind=function(e){return t.onUserLeaveRoomServer(e)},this.m_onReadyRoomServerBind=function(e){return t.onReadyRoomServer(e)},this.m_onPreGameServerBind=function(e){return t.onPreGameServer(e)}},e.prototype.removeBindHandlers=function(){this.m_onReadyHandlerBind=null,this.m_onLeaveHandlerBind=null,this.m_onLeaveRoomServerBind=null,this.m_onUserJoinRoomServerBind=null,this.m_onUserLeaveRoomServerBind=null,this.m_onReadyRoomServerBind=null,this.m_onPreGameServerBind=null},e.prototype.addUsers=function(t){var e=new ByteArray(t);this.m_nameRoom=e.readString;var n=e.readUInt8;console.log("totalPlayers ",n);var i,o;for(o=0;o<n;o++)i=new BitmapText("",{font:"40pt Desyrel"}),e.readString,i.text=e.readString,e.readUInt8,e.readUInt32,e.readUInt16,e.readUInt32,e.readUInt32,e.readUInt32,i.position.y=50*o*Capabilities.i.textureRatio;e.destroy(),e=null,i=null},e.prototype.onUserJoinRoomServer=function(t){},e.prototype.onLeaveRoomServer=function(t){this.s.currentView=new f,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onUserLeaveRoomServer=function(t){},e.prototype.onReadyRoomServer=function(t){console.log("onReadyRoomServer +++++++ ",t.name," _data.x ",t.x)},e.prototype.onPreGameServer=function(t){this.s.currentView=new p(t),this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onReadyHandler=function(t){this.m_readyBtn.enabled=!1,this.m_nsp.emitNsp("[2X.)")},e.prototype.onLeaveHandler=function(t){this.m_leaveBtn.enabled=!1,this.m_nsp.emitNsp('_Ol2"')},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.m_nsp.socketNsp.off("@\\mO6",this.m_onLeaveRoomServerBind),this.m_nsp.socketNsp.off("{$kV'",this.m_onUserJoinRoomServerBind),this.m_nsp.socketNsp.off("5v$g=",this.m_onUserLeaveRoomServerBind),this.m_nsp.socketNsp.off("xj,ok",this.m_onReadyRoomServerBind),this.m_nsp.socketNsp.off("6|]&<",this.m_onPreGameServerBind),this.removeBindHandlers(),this.m_readyBtn=null,this.m_leaveBtn=null,this.m_nsp=null},e}(ParentView),f=function(t){function e(){var e=t.call(this)||this;return e.onNspDisconnect=function(t){e.s.currentPopup=new y,e.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_POPUP))},e.onIntervalGetRoomsNs=function(){e.m_nsp.emitNsp("8KLO6")},e.onMainConnectHandler=function(){e.s.currentView=new B,e.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"nameSpaceView","img/graphics/screens.json"),this.m_nsp=IODynNsp.i,this.addBindHandlers(),this.setBackground(),this.m_nsp.socketNsp.on("7DM}9",this.m_onGetRoomsNsServerBind),this.m_nsp.socketNsp.on("&iPBl",this.m_onGetUsersNsServerBind),this.m_nsp.socketNsp.on("]}#Lx",this.m_onJoinRoomNsServerBind),this.m_nsp.socketNsp.on("nb5El",this.m_onJoinRoomIsFullServerBind),this.m_nsp.socketNsp.on("/[:^l",this.m_onUserJoinNsServerBind),this.m_nsp.socketNsp.on("mhkGk",this.m_onUserLeaveNsServerBind),this.m_nsp.socketNsp.on("Gu9-C",this.m_onListRoomNsServerBind),this.m_nsp.socketNsp.on("4by+d",this.m_onRemoveRoomNsServerBind),IOMain.i.onMainDisconnect=null,this.m_nsp.onNspDisconnect=this.onNspDisconnect,this.m_timerId=setInterval(this.onIntervalGetRoomsNs,45e3)},e.prototype.addBindHandlers=function(){var t=this;this.m_onCreateRoomHandlerBind=function(e){return t.onCreateRoomHandler(e)},this.m_onJoinRoomHandlerBind=function(e){return t.onJoinRoomHandler(e)},this.m_onCloseHandlerBind=function(e){return t.onCloseHandler(e)},this.m_onGetRoomsNsServerBind=function(e){return t.onGetRoomsNsServer(e)},this.m_onGetUsersNsServerBind=function(e){return t.onGetUsersNsServer(e)},this.m_onJoinRoomNsServerBind=function(e){return t.onJoinRoomNsServer(e)},this.m_onJoinRoomIsFullServerBind=function(e){return t.onJoinRoomIsFullServer(e)},this.m_onUserJoinNsServerBind=function(e){return t.onUserJoinNsServer(e)},this.m_onUserLeaveNsServerBind=function(e){return t.onUserLeaveNsServer(e)},this.m_onListRoomNsServerBind=function(e){return t.onListRoomNsServer(e)},this.m_onRemoveRoomNsServerBind=function(e){return t.onRemoveRoomNsServer(e)},this.m_onClickNameRoomBind=function(e){return t.onClickNameRoom(e)},this.m_clickJoinRoomBind=function(e){return t.clickJoinRoom(e)}},e.prototype.removeBindHandlers=function(){this.m_onCreateRoomHandlerBind=null,this.m_onJoinRoomHandlerBind=null,this.m_onCloseHandlerBind=null,this.m_onGetRoomsNsServerBind=null,this.m_onGetUsersNsServerBind=null,this.m_onJoinRoomNsServerBind=null,this.m_onJoinRoomIsFullServerBind=null,this.m_onUserJoinNsServerBind=null,this.m_onUserLeaveNsServerBind=null,this.m_onListRoomNsServerBind=null,this.m_onRemoveRoomNsServerBind=null,this.m_onClickNameRoomBind=null,this.m_clickJoinRoomBind=null},e.prototype.onGetRoomsNsServer=function(t){this.addRoomClient(t)},e.prototype.onGetUsersNsServer=function(t){this.addUserClient(t)},e.prototype.onJoinRoomNsServer=function(t){this.s.currentView=new g(t),this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onJoinRoomIsFullServer=function(t){this.m_joinBtn.enabled=!0,this.m_createBtn.enabled=!0},e.prototype.onUserJoinNsServer=function(t){},e.prototype.onUserLeaveNsServer=function(t){this.addUserClient(t)},e.prototype.onListRoomNsServer=function(t){var e=new ByteArray(t);e.readString;var n=e.readString,i=e.readUInt8,o=e.readString,s=new BitmapText("",{font:"70px Desyrel"},(!1));s.text=n+" : "+i+" : "+o;var r;s.on("click",this.m_clickJoinRoomBind),s.on("tap",this.m_clickJoinRoomBind),e.destroy(),e=null,r=null,s=null},e.prototype.onRemoveRoomNsServer=function(t){this.addRoomClient(t)},e.prototype.addRoomClient=function(t){var e,n,i,o,s,r=new ByteArray(t),a=r.readUInt16,l=0,h=this;for(l=0;l<a;l++)e=new BitmapText("",{font:"70px Desyrel"},(!1)),r.readString,i=r.readString,o=r.readUInt8,s=r.readString,e.text=i+" : "+o+" : "+s,e.position.y=70*l*Capabilities.i.textureRatio,e.on("click",h.m_clickJoinRoomBind),e.on("tap",h.m_clickJoinRoomBind);r.destroy(),r=null,n=null,e=null},e.prototype.addUserClient=function(t){var e,n=new ByteArray(t),i=n.readUInt16,o=0;for(o=0;o<i;o++)e=new BitmapText("",{font:"40px Desyrel"},(!1)),e.text=n.readString,n.readString,e.position.y=50*o*Capabilities.i.textureRatio;n.destroy(),n=null,e=null},e.prototype.clickJoinRoom=function(t){var e=t.target.children[0].text;new ByteArray;console.log("nameRoom ",e)},e.prototype.setBackground=function(){this.m_createBtn=this.setCenterButton("createBtn",this.m_onCreateRoomHandlerBind),this.m_createBtn=this.setCenterButton("joinBtn",this.m_onJoinRoomHandlerBind),this.m_closeBtn=this.setCornerButton("closeBtn",this.m_onCloseHandlerBind,Support.RIGHT_UP),this.m_titleTxt=new BitmapText("",{font:"50px Desyrel"}),this.m_titleTxt.position.x=50*Capabilities.i.textureRatio,this.m_titleTxt.position.y=900*Capabilities.i.textureRatio,this.m_titleTxt.text=this.m_nsp.nameNsp,this.addChild(this.m_titleTxt.content);var t={};t.y=4.75,t.text="empty",t.maxChars=15,t.width=168,t.type="input",t.height=27,t.style={align:"left",font:"50px Desyrel",fill:"#000000"},t.x=0,this.m_nameRoomTxt=new Input(null,null,null,t),this.m_quad=new PIXI.Graphics,this.m_quad.beginFill(16777215),this.m_quad.drawRect(0,0,300,50),this.m_quad.alpha=.3,this.m_quad.interactive=!0,this.m_quad.on("click",this.m_onClickNameRoomBind),this.m_quad.on("tap",this.m_onClickNameRoomBind),Capabilities.i.isDesktop&&this.m_nameRoomTxt.addFocus()},e.prototype.onCreateRoomHandler=function(t){if(""!=this.m_nameRoomTxt.text){this.m_createBtn.enabled=!1;var e=new ByteArray;e.writeString(this.m_nameRoomTxt.text),this.m_nsp.emitNsp("pnNAJ",e.buffer),e.destroy(),e=null}},e.prototype.onJoinRoomHandler=function(t){if(""!=this.m_nameRoomTxt.text){this.m_joinBtn.enabled=!1;var e=new ByteArray;e.writeString(this.m_nameRoomTxt.text),this.m_nsp.emitNsp("s[|YD",e.buffer),e.destroy(),e=null}},e.prototype.onCloseHandler=function(t){this.m_closeBtn.enabled=!1,null!=this.m_nsp&&this.m_nsp.leaveToMainServer(this.onMainConnectHandler)},e.prototype.onClickNameRoom=function(t){this.m_nameRoomTxt.addFocus()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.m_nsp.socketNsp.off("7DM}9",this.m_onGetRoomsNsServerBind),this.m_nsp.socketNsp.off("&iPBl",this.m_onGetUsersNsServerBind),this.m_nsp.socketNsp.off("]}#Lx",this.m_onJoinRoomNsServerBind),this.m_nsp.socketNsp.off("nb5El",this.m_onJoinRoomIsFullServerBind),this.m_nsp.socketNsp.off("/[:^l",this.m_onUserJoinNsServerBind),this.m_nsp.socketNsp.off("mhkGk",this.m_onUserLeaveNsServerBind),this.m_nsp.socketNsp.off("Gu9-C",this.m_onListRoomNsServerBind),this.m_nsp.socketNsp.off("4by+d",this.m_onRemoveRoomNsServerBind),this.m_quad.off("click",this.m_onClickNameRoomBind),this.m_quad.off("tap",this.m_onClickNameRoomBind),this.removeBindHandlers(),clearInterval(this.m_timerId),this.m_nameRoomTxt.destroy(),this.m_createBtn=null,this.m_joinBtn=null,this.m_titleTxt=null,
this.m_quad=null,this.m_nameRoomTxt=null,this.m_nsp=null},e}(ParentView),B=function(t){function e(){var e=t.call(this)||this;return e.onNsConnectHandler=function(t){IODynNsp.i.connect(t,e.onConnectHandler)},e.onConnectHandler=function(){e.s.currentView=new f,e.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.onMainDisconnect=function(){e.s.currentPopup=new y,e.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_POPUP))},e.onLeaveToMainMenuHandler=function(){e.s.currentView=new v,e.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"serverView","img/graphics/screens.json"),this.m_io=IOMain.i,this.addBindHandlers(),this.setBackground(),this.m_io.onMainDisconnect=this.onMainDisconnect},e.prototype.addBindHandlers=function(){var t=this;this.m_onServer1HandlerBind=function(e){return t.onServer1Handler(e)},this.m_onServer2HandlerBind=function(e){return t.onServer2Handler(e)},this.m_onServer3HandlerBind=function(e){return t.onServer3Handler(e)},this.m_closeHandlerBind=function(e){return t.onCloseHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onServer1HandlerBind=null,this.m_onServer2HandlerBind=null,this.m_onServer3HandlerBind=null,this.m_closeHandlerBind=null},e.prototype.setBackground=function(){this.m_server1Btn=this.setCenterButton("server1Btn",this.m_onServer1HandlerBind),this.m_server2Btn=this.setCenterButton("server2Btn",this.m_onServer2HandlerBind),this.m_server3Btn=this.setCenterButton("server3Btn",this.m_onServer3HandlerBind),this.setCornerButton("closeBtn",this.m_closeHandlerBind,Support.RIGHT_UP);var t=new PIXI.extras.BitmapText("bitmap fonts "+this.m_io.socketMain.io.engine.pingIntervalTimer,{font:"35px Desyrel",align:"right"});t.position.x=320*Capabilities.i.textureRatio,t.position.y=320*Capabilities.i.textureRatio,t.scale.x=2,t.scale.y=2;var e=new PIXI.extras.BitmapText("BITMAP SCORE "+this.m_io.socketMain.io.engine.pingTimeoutTimer,{font:"35px BadaBoomBB",align:"right"});e.position.x=420*Capabilities.i.textureRatio,e.position.y=420*Capabilities.i.textureRatio,e.scale.x=2,e.scale.y=2,console.log("----------------------------------"),console.log("engine hostname ",this.m_io.socketMain.io.engine.hostname),console.log("engine port ",this.m_io.socketMain.io.engine.port),console.log("engine policyPort ",this.m_io.socketMain.io.engine.policyPort),console.log("engine rememberUpgrade ",this.m_io.socketMain.io.engine.rememberUpgrade),console.log("engine onlyBinaryUpgrades ",this.m_io.socketMain.io.engine.onlyBinaryUpgrades),console.log("engine pingInterval ",this.m_io.socketMain.io.engine.pingInterval),console.log("engine pingIntervalTimer ",this.m_io.socketMain.io.engine.pingIntervalTimer),console.log("engine pingTimeout ",this.m_io.socketMain.io.engine.pingTimeout),console.log("engine pingTimeoutTimer ",this.m_io.socketMain.io.engine.pingTimeoutTimer),console.log("----------------------------------")},e.prototype.onServer1Handler=function(t){this.m_server1Btn.enabled=!1,this.m_io.joinDynNsp({globalNsp:"server_1",nameUser:"Guest_"+this.m_io.socketMain.io.engine.id,guest:!0},this.onNsConnectHandler)},e.prototype.onServer2Handler=function(t){this.m_server2Btn.enabled=!1,this.m_io.joinDynNsp({globalNsp:"server_2",nameUser:"Guest_"+this.m_io.socketMain.io.engine.id,guest:!0},this.onNsConnectHandler)},e.prototype.onServer3Handler=function(t){this.m_server3Btn.enabled=!1,this.m_io.joinDynNsp({globalNsp:"server_3",nameUser:"Guest_"+this.m_io.socketMain.io.engine.id,guest:!0},this.onNsConnectHandler)},e.prototype.onCloseHandler=function(t){this.m_io.onLeaveToMainMenu(this.onLeaveToMainMenuHandler)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),this.m_server1Btn=null,this.m_server2Btn=null,this.m_server3Btn=null,this.m_io=null},e}(ParentView),v=function(t){function e(){var e=t.call(this)||this;return e.onConnectHandler=function(){e.s.currentView=new B,e.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.onMainDisconnect=function(){e.s.currentPopup=new y,e.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_POPUP))},e}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"mainMenuView","img/graphics/screens.json"),this.addBindHandlers(),this.setBackground(),this.m_io=IOMain.i,this.m_io.onMainDisconnect=this.onMainDisconnect;var e=1436291840,n=new Date;n.setTime(1e3*e),console.log("today.getUTCSeconds() ",n.getUTCSeconds()),console.log("today.getUTCMinutes() ",n.getUTCMinutes()),console.log("today.getUTCHours() ",n.getUTCHours()),console.log("today.getUTCDay() ",n.getUTCDay()),console.log("today.getUTCDate() ",n.getUTCDate()),console.log("today.getutcmonth() ",n.getUTCMonth()),console.log("today.getUTCFullYear() ",n.getUTCFullYear())},e.prototype.addBindHandlers=function(){var t=this;this.m_onSingleHandlerBind=function(e){return t.onSingleHandler(e)},this.m_onMultiHandlerBind=function(e){return t.onMultiHandler(e)},this.m_onRankingHandlerBind=function(e){return t.onRankingHandler(e)},this.m_onOptionsHandlerBind=function(e){return t.onOptionsHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onSingleHandlerBind=null,this.m_onMultiHandlerBind=null,this.m_onRankingHandlerBind=null,this.m_onOptionsHandlerBind=null},e.prototype.setBackground=function(){this.setCenterButton("singleBtn",this.m_onSingleHandlerBind),this.setCenterButton("multiBtn",this.m_onMultiHandlerBind),this.setCenterButton("rankingBtn",this.m_onRankingHandlerBind),this.setCenterButton("optionsBtn",this.m_onOptionsHandlerBind),this.m_audioSprite=new AudioSprite("10","img/sounds/combo.json")},e.prototype.onSingleHandler=function(t){this.s.currentView=new c,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onMultiHandler=function(t){this.m_audioSprite&&this.m_audioSprite.play()},e.prototype.onRankingHandler=function(t){this.s.currentView=new u,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onOptionsHandler=function(t){this.s.currentView=new _,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),null!=this.m_audioSprite&&this.m_audioSprite.destroy(),this.m_audioSprite=null,this.m_io=null},e}(ParentView),C=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"welcomeView","img/graphics/screens.json"),this.addBindHandlers(),this.setBackground()},e.prototype.addBindHandlers=function(){var t=this;this.m_onPlayHandlerBind=function(e){return t.onPlayHandler(e)},this.m_onNewUserHandlerBind=function(e){return t.onNewUserHandler(e)},this.m_onClickTapItemBind=function(e){return t.onClickTapItem(e)}},e.prototype.removeBindHandlers=function(){this.m_onPlayHandlerBind=null,this.m_onNewUserHandlerBind=null,this.m_onClickTapItemBind=null},e.prototype.setBackground=function(){this.setCenterButton("playBtn",this.m_onPlayHandlerBind),this.m_titleTxt=new BitmapText("Welcome "+(Capabilities.i.isWebGLRenderer?"YES":"NO"),{fontName:"Desyrel",fontSize:50,fill:"black",align:"left"}),this.m_titleTxt.position.x=520*Capabilities.i.textureRatio,this.m_titleTxt.position.y=520*Capabilities.i.textureRatio,this.addChild(this.m_titleTxt.content)},e.prototype.onPlayHandler=function(t){this.s.currentView=new v,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onNewUserHandler=function(t){this.s.currentView=new s,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.onClickTapItem=function(t){var e=t.target,n=e.children[0].text;OfflineData.removeUser(n),this.m_tempPan.removeItem(e.children[0].text)},e.prototype.update=function(){t.prototype.update.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),this.m_titleTxt.destroy(),this.m_titleTxt=null},e}(ParentView),H=function(t){function e(){var e=t.call(this)||this;return e.addBindBungeoLoader(),e.addBindBungeoLoaderGame(),e.s.preLoader=new S("img/graphics/#textureType#/loader.sympck",e.m_onCompleteLoaderPreBind),OfflineData.loadCurrentUser(),e}return o(e,t),e.prototype.addBindBungeoLoader=function(){var t=this;this.m_onCompleteLoaderPreBind=function(){return t.completeLoaderPre()},this.m_onCompleteLoaderBind=function(){return t.completeLoader()}},e.prototype.removeBindBungeoLoader=function(){this.m_onCompleteLoaderPreBind=null,this.m_onCompleteLoaderBind=null},e.prototype.addBindBungeoLoaderGame=function(){var t=this;this.m_onCompleteLoaderGameBind=function(){return t.completeLoaderGame()}},e.prototype.removeBindBungeoLoaderGame=function(){this.m_onCompleteLoaderGameBind=null},e.prototype.completeLoaderPre=function(){var t=["img/sounds/combo.json","img/graphics/#textureType#/merge.xml","img/graphics/#textureType#/screens.sympck"];this.m_loader=new Loader(this.m_onCompleteLoaderBind),this.m_loader.assetsToLoader=t,this.m_loader.load()},e.prototype.completeLoader=function(){this.removeBindBungeoLoader(),this.m_loader.destroy(),this.m_loader=null;var t=["img/graphics/#textureType#/game.sympck"];this.m_loaderGame=new Loader(this.m_onCompleteLoaderGameBind),this.m_loaderGame.assetsToLoader=t,this.m_loaderGame.load(!1),null==OfflineData.m_userIdBinary?this.s.currentView=new r:this.s.currentView=new C,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW)),this.p_cheats=new Cheats,this.p_contentConsole.addChild(this.p_cheats.content)},e.prototype.completeLoaderGame=function(){this.removeBindBungeoLoaderGame(),this.m_loaderGame.destroy(),this.m_loaderGame=null},e.prototype.update=function(){t.prototype.update.call(this),this.p_cheats&&this.p_cheats.update()},e.prototype.destroy=function(){this.p_cheats&&this.p_cheats.destroy(),this.p_cheats=null,this.m_loader&&this.m_loader.destroy(),this.m_loader=null,this.m_loaderGame&&this.m_loaderGame.destroy(),this.m_loaderGame=null,this.removeBindBungeoLoader(),this.removeBindBungeoLoaderGame(),t.prototype.destroy.call(this)},e}(Client),w;window.addEventListener("load",t,!1),window.addEventListener("unload",e,!1);var S=function(t){function e(e,n){return t.call(this,e,n)||this}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.loadAssets=function(){t.prototype.loadAssets.call(this),this.m_rightHalf=this.m_movieClip.getChildByName("clock1"),this.m_rightHalf.pivotX=0,this.m_rightHalf.pivotY=this.m_rightHalf.height/2,this.m_rightHalf.content.y+=this.m_rightHalf.height/2,this.m_leftHalf=this.m_movieClip.getChildByName("clock3"),this.m_leftHalf.pivotX=this.m_leftHalf.width,this.m_leftHalf.pivotY=this.m_leftHalf.height/2,this.m_leftHalf.content.x+=this.m_leftHalf.width,this.m_leftHalf.content.y+=this.m_leftHalf.height/2,this.m_rightHalfMidle=this.m_movieClip.getChildByName("clock2"),this.m_rightHalfOver=this.m_movieClip.getChildByName("clock5"),this.m_rightHalfOver.content.alpha=0,this.m_handle=this.m_movieClip.getChildByName("Handle"),this.m_handle.pivotX=15,this.m_handle.pivotY=30,this.m_handle.content.x+=15,this.m_handle.content.y+=30,this.m_count=0},e.prototype.update=function(){this.m_count<this.m_progress&&this.m_count<100&&this.m_count++,this.updateShadow(),this.updateClockHand()},e.prototype.updateShadow=function(){this.m_count<50?(this.m_leftHalf&&(this.m_leftHalf.content.rotation=0),this.m_rightHalf&&(this.m_rightHalf.content.rotation=3.6*this.m_count*Math.PI/180),this.m_rightHalfOver&&(this.m_rightHalfOver.content.alpha=0)):(this.m_rightHalf&&(this.m_rightHalf.content.rotation=Math.PI),this.m_leftHalf&&(this.m_leftHalf.content.rotation=3.6*(this.m_count-50)*Math.PI/180),this.m_rightHalfOver&&(this.m_rightHalfOver.content.alpha=1))},e.prototype.updateClockHand=function(){this.m_handle&&(this.m_handle.content.rotation=(3.6*this.m_count-90)*Math.PI/180)},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(PreLoader),E=function(t){function e(e,n){var i=t.call(this)||this;return i.m_image1=e,i.m_image2=new Instance(n,"img/graphics/game.json"),i.m_speed=5,i.init(),i}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.m_initX=this.m_image1.position.x,this.m_initY=this.m_image1.position.y,this.m_widthLayer=this.m_image1.width-1,this.m_image1.position.x=0,this.m_image2.position.x=this.m_widthLayer,this.m_image2.position.y=this.m_initY,this.content.position.x=this.m_initX,this.addChild(this.m_image1.content),this.addChild(this.m_image2.content)},e.prototype.update=function(){this.content.position.x-=Math.ceil(this.m_speed*this.m_parallax),this.content.position.x<this.m_initX-this.m_widthLayer&&(this.content.position.x=this.m_initX)},Object.defineProperty(e.prototype,"parallax",{get:function(){return this.m_parallax},set:function(t){this.m_parallax=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.m_speed},set:function(t){this.m_speed=t},enumerable:!0,configurable:!0}),e}(Entity),N=function(t){function e(e){var n=t.call(this)||this;return n.foodItemType=e,n.init(),n}return o(e,t),Object.defineProperty(e.prototype,"foodItemType",{get:function(){return this.m_foodItemType},set:function(t){this.m_foodItemType=t,this.m_itemImage=new Instance("itemsIns","img/graphics/game.json"),this.m_itemImage.gotoAndStop(this.foodItemType),this.addChild(this.m_itemImage.content)},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeChild(this.m_itemImage.content),this.m_itemImage.destroy(),this.m_itemImage=null},e}(Entity),b=function(t){function e(e,n,i,o){void 0===i&&(i=!0),void 0===o&&(o=0);var s=t.call(this)||this;return s.m_type=e,s.m_distance=n,s.m_watchOut=i,s.m_speed=o,s.m_alreadyHit=!1,s.init(),s}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.createObstacleArt(),this.createObstacleCrashArt(),this.createWatchOutAnimation()},Object.defineProperty(e.prototype,"speed",{get:function(){return this.m_speed*this.m_elapsed},set:function(t){this.m_speed=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this.m_distance},set:function(t){this.m_distance=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positionMsg",{get:function(){return this.m_positionMsg},set:function(t){this.m_positionMsg=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alreadyHit",{get:function(){return this.m_alreadyHit},set:function(t){this.m_alreadyHit=t,t&&(this.m_obstacleCrashImage.visible=!0,4==this.m_type?this.m_obstacleAnimation.content.visible=!1:this.m_obstacleImage.content.visible=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"watchOut",{get:function(){return this.m_watchOut},set:function(t){this.m_watchOut=t,this.m_watchOutAnimation&&(t?this.m_watchOutAnimation.visible=!0:this.m_watchOutAnimation.visible=!1)},enumerable:!0,configurable:!0}),e.prototype.createWatchOutAnimation=function(){this.m_watchOutAnimation=new Instance("watchOutIns","img/graphics/game.json"),4==this.m_type?this.m_watchOutAnimation.position.y=this.m_obstacleAnimation.position.y+.5*this.m_obstacleAnimation.content.height-.5*this.m_watchOutAnimation.content.height:this.m_watchOutAnimation.position.y=this.m_obstacleImage.position.y+.5*this.m_obstacleImage.content.height-.5*this.m_watchOutAnimation.content.height,this.m_watchOutAnimation.position.x=-this.m_watchOutAnimation.content.width,this.addChild(this.m_watchOutAnimation.content)},e.prototype.createObstacleCrashArt=function(){this.m_obstacleCrashImage=new Instance("obstacle"+this.m_type+"_crashIns","img/graphics/game.json"),this.m_obstacleCrashImage.content.visible=!1,this.addChild(this.m_obstacleCrashImage.content)},e.prototype.createObstacleArt=function(){4==this.m_type?(this.m_obstacleAnimation=new Instance("obstacle"+this.m_type+"Ins","img/graphics/game.json"),this.addChild(this.m_obstacleAnimation.content)):(this.m_obstacleImage=new Instance("obstacle"+this.m_type+"Ins","img/graphics/game.json"),this.addChild(this.m_obstacleImage.content))},e.prototype.update=function(){t.prototype.update.call(this),this.m_timePrevious=this.m_timeCurrent,this.m_timeCurrent=Date.now(),this.m_elapsed=.001*(this.m_timeCurrent-this.m_timePrevious),this.m_watchOutAnimation&&this.m_watchOutAnimation.update(),this.m_obstacleAnimation&&this.m_obstacleAnimation.update()},e}(Entity),P=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.init=function(n){t.prototype.init.call(this),e.TOP_GAME=168*Capabilities.i.textureRatio,e.BOTTOM_GAME=1368*Capabilities.i.textureRatio,e.SPACE=150*Capabilities.i.textureRatio,this.m_gameState="idle",this.m_playerSpeed=0,this.m_speed=0,this.m_timeCurrent=0,this.p_content=n.content,this.x=-Capabilities.i.widthGame,this.y=n.position.y,this.m_pointXY=new Point(n.position.x,n.position.y)},e.prototype.update=function(){t.prototype.update.call(this),this.m_timePrevious=this.m_timeCurrent,this.m_timeCurrent=Date.now(),this.m_elapsed=.001*(this.m_timeCurrent-this.m_timePrevious),"idle"==this.m_gameState?this.m_xy.x<e.POSX*Capabilities.i.textureRatio?(this.m_xy.x+=.05*((e.POSX+10)*Capabilities.i.textureRatio-this.m_xy.x),this.m_xy.y=.5*Capabilities.i.heightGame,this.m_playerSpeed+=.05*(e.MIN_SPEED-this.m_playerSpeed),this.m_speed=this.m_playerSpeed*this.m_elapsed):this.m_gameState="flying":"flying"==this.m_gameState&&(this.m_xy.y-=.1*(this.m_xy.y-this.m_pointXY.y),-(this.m_xy.y-this.m_pointXY.y)<e.SPACE&&-(this.m_xy.y-this.m_pointXY.y)>-e.SPACE&&(this.rotation=.2*-(this.m_xy.y-this.m_pointXY.y)*Math.PI/180),this.m_xy.y>e.BOTTOM_GAME-.5*this.height&&(this.m_xy.y=e.BOTTOM_GAME-.5*this.height,this.rotation=0),this.m_xy.y<e.TOP_GAME+.5*this.height&&(this.m_xy.y=e.TOP_GAME+.5*this.height,this.rotation=0),this.m_playerSpeed-=.01*(this.m_playerSpeed-e.MIN_SPEED),this.m_speed=this.m_playerSpeed*this.m_elapsed)},Object.defineProperty(e.prototype,"pointXY",{set:function(t){this.m_pointXY=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this.m_speed*Capabilities.i.textureRatio},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(PlayerC);P.TOP_GAME=168,P.BOTTOM_GAME=1368,P.SPACE=150,P.MIN_SPEED=650,P.POSX=200;var x=function(t){function e(){var e=t.call(this)||this;return Logs.log("RegisterView"),e}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"registerView","img/graphics/screens.json"),this.addBindHandlers(),this.setCenterButton("registerBtn",this.m_onGuestHandlerBind),this.setCenterButton("guestBtn",this.m_onGuestHandlerBind)},e.prototype.addBindHandlers=function(){var t=this;this.m_onRegisterHandlerBind=function(e){return t.onRegisterHandler(e)},this.m_onGuestHandlerBind=function(e){return t.onGuestHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onRegisterHandlerBind=null,this.m_onGuestHandlerBind=null},e.prototype.onRegisterHandler=function(t){console.log("onRegisterHandler ")},e.prototype.onGuestHandler=function(t){OfflineData.addNewGuestUser(),this.s.currentView=new C,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),Logs.log("destroy RegisterView ------------------------------")},e}(ParentView),R=function(t){function e(){var e=t.call(this)||this;return Logs.log("NewsView"),e}return o(e,t),e.prototype.init=function(){var e=this;t.prototype.init.call(this,"newsView","img/graphics/screens.json"),this.m_onCreateHandlerBind=function(t){return e.onCreateHandler(t)},this.setCenterButton("createBtn",this.m_onCreateHandlerBind)},e.prototype.onCreateHandler=function(t){this.s.currentView=new v,this.s.dispatchEvent(new NewEvent(SingletonClass.CHANGE_VIEW))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.m_onCreateHandlerBind=null,Logs.log("destroy NewsView------------------------------")},e}(ParentView),L=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"outdatedMsg","img/graphics/screens.json")},e}(ParentMsg),G=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"portraitMsg","img/graphics/screens.json")},e}(ParentMsg),T=function(t){function e(){var e=t.call(this)||this;return Logs.log("MultiplayerView"),e}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this,"multiPlayerView","img/graphics/screens.json"),this.addBindHandlers(),this.setCornerButton("closeBtn",this.m_onCloseHandlerBind,Support.RIGHT_UP)},e.prototype.addBindHandlers=function(){var t=this;this.m_onCloseHandlerBind=function(e){return t.onCloseHandler(e)}},e.prototype.removeBindHandlers=function(){this.m_onCloseHandlerBind=null},e.prototype.onCloseHandler=function(t){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeBindHandlers(),Logs.log("destroy MultiplayerView------------------------------")},e}(ParentView);
//# sourceMappingURL=../sourcemaps/client.js.map
